'use strict';
const _0x4f550c = _0x2fb6;
(function (_0x551597, _0x12dc47) {
    const _0x5f0899 = _0x2fb6, _0x40c5f6 = _0x551597();
    while (!![]) {
        try {
            const _0xa7c0bf = -parseInt(_0x5f0899(0xed)) / (-0xf * 0x11 + -0x10 * 0x4f + 0x2f8 * 0x2) * (parseInt(_0x5f0899(0xea)) / (-0x1a95 + -0x19da + -0x37f * -0xf)) + parseInt(_0x5f0899(0xef)) / (0x2 * -0x6dc + -0x12f7 * 0x2 + 0x33a9) * (-parseInt(_0x5f0899(0xd8)) / (0xf09 + 0x2702 + -0x3607 * 0x1)) + parseInt(_0x5f0899(0xdb)) / (0x1895 + -0x11d8 + -0x8 * 0xd7) + -parseInt(_0x5f0899(0xe7)) / (0x25 * -0x51 + -0x5eb * 0x5 + -0x2952 * -0x1) + parseInt(_0x5f0899(0xd9)) / (0x503 * -0x5 + -0x3 * 0x97 + 0x7d * 0x37) + -parseInt(_0x5f0899(0xbf)) / (-0x1560 + 0xb1 + -0x1 * -0x14b7) + -parseInt(_0x5f0899(0xdc)) / (0x50 * -0x50 + 0x1 * 0x2507 + -0xbfe) * (-parseInt(_0x5f0899(0xe2)) / (0x24bc + 0x1733 + -0x3 * 0x13f7));
            if (_0xa7c0bf === _0x12dc47)
                break;
            else
                _0x40c5f6['push'](_0x40c5f6['shift']());
        } catch (_0xa6dba8) {
            _0x40c5f6['push'](_0x40c5f6['shift']());
        }
    }
}(_0x29a8, 0x235 * -0xc4 + -0x1633fc + 0x2322c4 * 0x1));
var __awaiter = this && this[_0x4f550c(0xdd)] || function (_0xd32a38, _0x59b03a, _0x57f95c, _0x55c618) {
        const _0x349640 = _0x4f550c, _0xcebf3b = {
                'hahul': function (_0x36f91d, _0x1843ba) {
                    return _0x36f91d(_0x1843ba);
                },
                'PVyxw': function (_0x2bfe6f, _0x33d137) {
                    return _0x2bfe6f instanceof _0x33d137;
                },
                'nDnKk': function (_0x5d3f2e, _0x589c0e) {
                    return _0x5d3f2e(_0x589c0e);
                },
                'tWVVu': _0x349640(0xec),
                'xkgGr': function (_0x189bd5, _0x484c10) {
                    return _0x189bd5(_0x484c10);
                },
                'RTqWP': function (_0x2aa358, _0x37a8f9) {
                    return _0x2aa358(_0x37a8f9);
                }
            };
        function _0x3d732c(_0x21f4eb) {
            const _0x7a96ab = _0x349640;
            return _0xcebf3b[_0x7a96ab(0xe9)](_0x21f4eb, _0x57f95c) ? _0x21f4eb : new _0x57f95c(function (_0x168bf5) {
                const _0x4cc124 = _0x7a96ab;
                _0xcebf3b[_0x4cc124(0xe6)](_0x168bf5, _0x21f4eb);
            });
        }
        return new (_0x57f95c || (_0x57f95c = Promise))(function (_0x584adb, _0x583806) {
            const _0x5a76c4 = _0x349640, _0x57c828 = {
                    'XJjMX': function (_0x4ce28d, _0x1e3d30) {
                        const _0x3a7ec1 = _0x2fb6;
                        return _0xcebf3b[_0x3a7ec1(0xf2)](_0x4ce28d, _0x1e3d30);
                    },
                    'KMesp': function (_0x2308ae, _0x20b8dc) {
                        const _0x8270d9 = _0x2fb6;
                        return _0xcebf3b[_0x8270d9(0xe4)](_0x2308ae, _0x20b8dc);
                    }
                };
            function _0x43f16f(_0x25085d) {
                const _0x52dd24 = _0x2fb6;
                try {
                    _0x57c828[_0x52dd24(0xe0)](_0x430888, _0x55c618[_0x52dd24(0xd6)](_0x25085d));
                } catch (_0x4e70c3) {
                    _0x57c828[_0x52dd24(0xc5)](_0x583806, _0x4e70c3);
                }
            }
            function _0x1d7c54(_0x3d6e6c) {
                const _0x1e414b = _0x2fb6;
                try {
                    _0xcebf3b[_0x1e414b(0xf2)](_0x430888, _0x55c618[_0xcebf3b[_0x1e414b(0xc9)]](_0x3d6e6c));
                } catch (_0xada50b) {
                    _0xcebf3b[_0x1e414b(0xe4)](_0x583806, _0xada50b);
                }
            }
            function _0x430888(_0x185533) {
                const _0x2390f1 = _0x2fb6;
                _0x185533[_0x2390f1(0xbe)] ? _0xcebf3b[_0x2390f1(0xd4)](_0x584adb, _0x185533[_0x2390f1(0xc2)]) : _0xcebf3b[_0x2390f1(0xe6)](_0x3d732c, _0x185533[_0x2390f1(0xc2)])[_0x2390f1(0xd7)](_0x43f16f, _0x1d7c54);
            }
            _0xcebf3b[_0x5a76c4(0xd4)](_0x430888, (_0x55c618 = _0x55c618[_0x5a76c4(0xd0)](_0xd32a38, _0x59b03a || []))[_0x5a76c4(0xd6)]());
        });
    }, __importDefault = this && this[_0x4f550c(0xe8) + _0x4f550c(0xc1)] || function (_0x275a67) {
        const _0x55c484 = _0x4f550c;
        return _0x275a67 && _0x275a67[_0x55c484(0xe3)] ? _0x275a67 : { 'default': _0x275a67 };
    };
const _0x5df12e = {};
_0x5df12e[_0x4f550c(0xc2)] = !![], Object[_0x4f550c(0xcd) + _0x4f550c(0xd1)](exports, _0x4f550c(0xe3), _0x5df12e);
const rca_zpro_1 = __importDefault(require(_0x4f550c(0xf4) + _0x4f550c(0xe1) + _0x4f550c(0xc7))), TicketZPRO_1 = __importDefault(require(_0x4f550c(0xf0) + _0x4f550c(0xd2) + _0x4f550c(0xcb))), MessageZPRO_1 = __importDefault(require(_0x4f550c(0xf0) + _0x4f550c(0xcc) + _0x4f550c(0xc8))), UpdateLastMessageAtTicketService = ({tenantId: _0x2ea6cf}) => __awaiter(void (0x1 * 0xb4e + -0x6a6 + -0x4 * 0x12a), void (-0x1fd1 + -0xc79 + 0x2c4a), void (-0x16 * 0x25 + 0x2 * 0x680 + -0x9d2), function* () {
        const _0x1c40b6 = _0x4f550c, _0x5eaefc = {};
        _0x5eaefc[_0x1c40b6(0xcf)] = _0x1c40b6(0xd3) + _0x1c40b6(0xeb), _0x5eaefc[_0x1c40b6(0xee)] = _0x1c40b6(0xc4), _0x5eaefc[_0x1c40b6(0xde)] = _0x1c40b6(0xf1);
        const _0x393895 = _0x5eaefc, _0x23da66 = {};
        _0x23da66[_0x1c40b6(0xdf)] = _0x2ea6cf;
        const _0x48024e = {};
        _0x48024e[_0x1c40b6(0xc3)] = _0x23da66, _0x48024e[_0x1c40b6(0xc6)] = ['id'];
        const _0x32ff46 = yield TicketZPRO_1[_0x1c40b6(0xda)][_0x1c40b6(0xf5)](_0x48024e);
        if (!_0x32ff46[_0x1c40b6(0xc0)])
            throw new rca_zpro_1[(_0x1c40b6(0xda))](_0x393895[_0x1c40b6(0xcf)], 0x313 + -0x1220 + 0x10a1);
        for (const _0x5db172 of _0x32ff46) {
            const _0x5dae5b = {};
            _0x5dae5b[_0x1c40b6(0xe5)] = _0x5db172['id'];
            const _0xf1cd1d = {};
            _0xf1cd1d[_0x1c40b6(0xc3)] = _0x5dae5b, _0xf1cd1d[_0x1c40b6(0xf3)] = [[
                    _0x393895[_0x1c40b6(0xee)],
                    _0x393895[_0x1c40b6(0xde)]
                ]];
            const _0x1027a8 = yield MessageZPRO_1[_0x1c40b6(0xda)][_0x1c40b6(0xca)](_0xf1cd1d);
            if (_0x1027a8) {
                const _0x488918 = new Date(_0x1027a8[_0x1c40b6(0xc4)])[_0x1c40b6(0xce)]();
                yield _0x5db172[_0x1c40b6(0xd5)]({
                    'lastMessageAt': _0x488918,
                    'updatedAt': new Date(_0x488918)
                });
            }
        }
    });
function _0x29a8() {
    const _0x33d92b = [
        'value',
        'where',
        'createdAt',
        'KMesp',
        'attributes',
        '/rca_zpro',
        'ZPRO',
        'tWVVu',
        'findOne',
        'PRO',
        'ls/Message',
        'defineProp',
        'getTime',
        'inisZ',
        'apply',
        'erty',
        'ls/TicketZ',
        'ERR_NO_TIC',
        'RTqWP',
        'update',
        'next',
        'then',
        '631308HcKSeK',
        '4629450wqiWGB',
        'default',
        '4574105ffJofK',
        '27GpnWZO',
        '__awaiter',
        'xQSVT',
        'tenantId',
        'XJjMX',
        'kt9b0_zpro',
        '7672370xVmPbm',
        '__esModule',
        'xkgGr',
        'ticketId',
        'hahul',
        '1577622xEvewW',
        '__importDe',
        'PVyxw',
        '158dXfwwp',
        'KETS_FOUND',
        'throw',
        '6986KLlKAA',
        'DRFqG',
        '27QrFjEJ',
        '../../mode',
        'DESC',
        'nDnKk',
        'order',
        '../../tpy7',
        'findAll',
        'done',
        '7246304jAFBmK',
        'length',
        'fault'
    ];
    _0x29a8 = function () {
        return _0x33d92b;
    };
    return _0x29a8();
}
function _0x2fb6(_0x1d5622, _0x1aebca) {
    const _0x41b2c1 = _0x29a8();
    return _0x2fb6 = function (_0x5a8f7b, _0x43932a) {
        _0x5a8f7b = _0x5a8f7b - (0x2361 + -0xbc * -0x1d + 0x183 * -0x25);
        let _0x13616e = _0x41b2c1[_0x5a8f7b];
        return _0x13616e;
    }, _0x2fb6(_0x1d5622, _0x1aebca);
}
exports[_0x4f550c(0xda)] = UpdateLastMessageAtTicketService;