'use strict';
const _0x26482f = _0x4b3d;
(function (_0x2a16cb, _0x22f3ff) {
    const _0x42abfc = _0x4b3d, _0xfa33d3 = _0x2a16cb();
    while (!![]) {
        try {
            const _0x4419dd = parseInt(_0x42abfc(0xa0)) / (0x1 * 0xe7d + 0xe2e + 0x98e * -0x3) + -parseInt(_0x42abfc(0x9e)) / (0x1373 + 0x33 * -0x98 + 0xad7) + parseInt(_0x42abfc(0xb6)) / (-0x12a7 + 0x13c3 + -0x119 * 0x1) + parseInt(_0x42abfc(0xd7)) / (0x1c24 + 0x1ee * 0xd + -0x79a * 0x7) * (-parseInt(_0x42abfc(0xd4)) / (0x1a0b + 0x44 + -0x1 * 0x1a4a)) + -parseInt(_0x42abfc(0x81)) / (0x8 * -0x233 + 0x6 * 0xb9 + -0x154 * -0xa) * (parseInt(_0x42abfc(0x8e)) / (0x49e + 0x3 * -0x9e5 + 0x8 * 0x323)) + -parseInt(_0x42abfc(0xd9)) / (0x1 * -0x1a4d + 0x1982 + 0x1 * 0xd3) + parseInt(_0x42abfc(0xde)) / (0x4a * 0x6b + 0x235f + 0x4244 * -0x1) * (parseInt(_0x42abfc(0xa7)) / (0x2dc + 0x2214 + -0x2 * 0x1273));
            if (_0x4419dd === _0x22f3ff)
                break;
            else
                _0xfa33d3['push'](_0xfa33d3['shift']());
        } catch (_0x28f8d7) {
            _0xfa33d3['push'](_0xfa33d3['shift']());
        }
    }
}(_0x50c3, 0xab2bc + 0xa0e9b + -0xd8898));
function _0x4b3d(_0x43d257, _0x25f13c) {
    const _0x4022e9 = _0x50c3();
    return _0x4b3d = function (_0x465412, _0x299c24) {
        _0x465412 = _0x465412 - (0x92 * -0xf + 0x128d + -0x998);
        let _0xaa554c = _0x4022e9[_0x465412];
        return _0xaa554c;
    }, _0x4b3d(_0x43d257, _0x25f13c);
}
function _0x50c3() {
    const _0x49cc46 = [
        '1420DbOZYc',
        'whatsapp',
        'fZkRA',
        '4772CchkaN',
        'IFuYe',
        '1526392CnsQDX',
        'throw',
        'fault',
        'dataValues',
        'RucAI',
        '12501TwMPyD',
        'messageId',
        'where',
        'messages',
        '../../mode',
        'number',
        'pZPRO',
        'individual',
        'ticket',
        'video',
        'createdAt',
        'o/6gb8ypf_',
        'then',
        'chat:ack',
        'mNzoV',
        'rtKen',
        'AQjTb',
        'wabaMediaI',
        'zGTuq',
        'fCJoE',
        'value',
        'v88i6z_zpr',
        'contact',
        'document',
        'KokHN',
        'PEoqP',
        'CHdOy',
        '120036JtVSZt',
        'next',
        './SentMess',
        'type',
        'ls/Message',
        'mediaName',
        'ls/TicketZ',
        'update',
        'zpro',
        'caption',
        'timestamp',
        'sequelize',
        'PRO',
        '287RyeAnF',
        'znFxS',
        'zFtPe',
        'assign',
        'ack',
        'body',
        'audio',
        'done',
        'jnorh',
        'default',
        'ageZPRO',
        'dvEyd',
        'applicatio',
        'ASC',
        'text',
        '../../5zw8',
        '1062270EdZEbK',
        'jnVYO',
        '468307joVnMB',
        'CPtWe',
        'FAIbw',
        'voice',
        'waba',
        '7tljfp_zpr',
        'erty',
        '9820wEdpzt',
        'plwQV',
        'cvOqL',
        'FggDD',
        '__awaiter',
        'defineProp',
        'status',
        'xkNaN',
        'sended',
        'EpBJo',
        'chat',
        'quotedMsg',
        'jpKTR',
        'tenantId',
        'VhVlE',
        '1565898DNsrVb',
        'includes',
        'lte',
        'rvPhj',
        'usnJV',
        '__esModule',
        'apiKey',
        'uWYRT',
        'QmjOu',
        'tokenAPI',
        'findAll',
        'apply',
        '__importDe',
        'image',
        'BKIXa',
        'WWKFP',
        'message',
        'Vcwrk',
        'mediaUrl',
        '360',
        'tvsji',
        'pending',
        '_zpro/q7ae',
        'mediaType',
        'gJDVw',
        'xmpzG',
        '../../974u',
        'ls/Whatsap',
        'tzpmG',
        'ZPRO'
    ];
    _0x50c3 = function () {
        return _0x49cc46;
    };
    return _0x50c3();
}
var __awaiter = this && this[_0x26482f(0xab)] || function (_0x311b82, _0x5bd324, _0x220c4d, _0x1fb3e0) {
        const _0x15a10f = _0x26482f, _0x3f2428 = {
                'CHdOy': function (_0x357dcc, _0x54ad54) {
                    return _0x357dcc(_0x54ad54);
                },
                'xmpzG': function (_0x2f9dff, _0x2eecf2) {
                    return _0x2f9dff instanceof _0x2eecf2;
                },
                'RucAI': _0x15a10f(0xda),
                'VhVlE': function (_0x3dcd8e, _0x2dd04a) {
                    return _0x3dcd8e(_0x2dd04a);
                },
                'tzpmG': function (_0x22f571, _0x1a5460) {
                    return _0x22f571(_0x1a5460);
                }
            };
        function _0x2f1b73(_0x332952) {
            const _0x38cafe = _0x15a10f, _0x5068d4 = {
                    'tvsji': function (_0x3bd57d, _0x5d2e87) {
                        const _0x299c54 = _0x4b3d;
                        return _0x3f2428[_0x299c54(0x80)](_0x3bd57d, _0x5d2e87);
                    }
                };
            return _0x3f2428[_0x38cafe(0xcf)](_0x332952, _0x220c4d) ? _0x332952 : new _0x220c4d(function (_0x324b49) {
                const _0xb42c07 = _0x38cafe;
                _0x5068d4[_0xb42c07(0xca)](_0x324b49, _0x332952);
            });
        }
        return new (_0x220c4d || (_0x220c4d = Promise))(function (_0x24a00c, _0x2bbcee) {
            const _0x2abbb0 = _0x15a10f, _0x4bb238 = {
                    'jnorh': function (_0x22e0cd, _0x418cd5) {
                        const _0x2bf759 = _0x4b3d;
                        return _0x3f2428[_0x2bf759(0xb5)](_0x22e0cd, _0x418cd5);
                    },
                    'uWYRT': function (_0x3f7feb, _0x2363f0) {
                        const _0x3c6aec = _0x4b3d;
                        return _0x3f2428[_0x3c6aec(0xd2)](_0x3f7feb, _0x2363f0);
                    }
                };
            function _0x5e36e6(_0x3dd4ff) {
                const _0x503824 = _0x4b3d;
                try {
                    _0x4bb238[_0x503824(0x96)](_0x266664, _0x1fb3e0[_0x503824(0x82)](_0x3dd4ff));
                } catch (_0x5c05d4) {
                    _0x4bb238[_0x503824(0xbd)](_0x2bbcee, _0x5c05d4);
                }
            }
            function _0x4c4a98(_0x2a80c6) {
                const _0x2f8b46 = _0x4b3d;
                try {
                    _0x3f2428[_0x2f8b46(0x80)](_0x266664, _0x1fb3e0[_0x3f2428[_0x2f8b46(0xdd)]](_0x2a80c6));
                } catch (_0x44402b) {
                    _0x3f2428[_0x2f8b46(0x80)](_0x2bbcee, _0x44402b);
                }
            }
            function _0x266664(_0x8defc3) {
                const _0x529f07 = _0x4b3d;
                _0x8defc3[_0x529f07(0x95)] ? _0x4bb238[_0x529f07(0x96)](_0x24a00c, _0x8defc3[_0x529f07(0x7a)]) : _0x4bb238[_0x529f07(0xbd)](_0x2f1b73, _0x8defc3[_0x529f07(0x7a)])[_0x529f07(0x72)](_0x5e36e6, _0x4c4a98);
            }
            _0x3f2428[_0x2abbb0(0xd2)](_0x266664, (_0x1fb3e0 = _0x1fb3e0[_0x2abbb0(0xc1)](_0x311b82, _0x5bd324 || []))[_0x2abbb0(0x82)]());
        });
    }, __importDefault = this && this[_0x26482f(0xc2) + _0x26482f(0xdb)] || function (_0x38e05a) {
        const _0x5a3ae7 = _0x26482f;
        return _0x38e05a && _0x38e05a[_0x5a3ae7(0xbb)] ? _0x38e05a : { 'default': _0x38e05a };
    };
const _0x2f1176 = {};
_0x2f1176[_0x26482f(0x7a)] = !![], Object[_0x26482f(0xac) + _0x26482f(0xa6)](exports, _0x26482f(0xbb), _0x2f1176);
const sequelize_1 = require(_0x26482f(0x8c)), q7aev88i6z_zpro_1 = __importDefault(require(_0x26482f(0x9d) + _0x26482f(0xcc) + _0x26482f(0x7b) + 'o')), _6gb8ypf_zpro_1 = __importDefault(require(_0x26482f(0xd0) + _0x26482f(0xa5) + _0x26482f(0x71) + _0x26482f(0x89))), MessageZPRO_1 = __importDefault(require(_0x26482f(0x6a) + _0x26482f(0x85) + _0x26482f(0xd3))), TicketZPRO_1 = __importDefault(require(_0x26482f(0x6a) + _0x26482f(0x87) + _0x26482f(0x8d))), WhatsappZPRO_1 = __importDefault(require(_0x26482f(0x6a) + _0x26482f(0xd1) + _0x26482f(0x6c))), SentMessageZPRO_1 = __importDefault(require(_0x26482f(0x83) + _0x26482f(0x98))), buildWabaMessage360 = (_0x3aa7f6, _0xb52ef5) => __awaiter(void (-0x1856 + 0x121d * 0x1 + 0x639), void (0x1c1 * -0xd + -0xb00 * 0x1 + -0x1 * -0x21cd), void (-0x6de * -0x4 + -0xaca * -0x2 + -0xac * 0x49), function* () {
        const _0xa5679f = _0x26482f, _0x1cef7e = {
                'jpKTR': function (_0x143c04, _0x2c719c) {
                    return _0x143c04(_0x2c719c);
                },
                'rvPhj': _0xa5679f(0x6d),
                'jnVYO': _0xa5679f(0x9c),
                'WWKFP': function (_0x23eda4, _0x3cafc1) {
                    return _0x23eda4 === _0x3cafc1;
                },
                'AQjTb': _0xa5679f(0x9a) + 'n',
                'zFtPe': function (_0x56903a, _0x979baa) {
                    return _0x56903a === _0x979baa;
                },
                'zGTuq': _0xa5679f(0x7d),
                'dvEyd': _0xa5679f(0xc3),
                'IFuYe': function (_0x492884, _0x36c0d1) {
                    return _0x492884 === _0x36c0d1;
                },
                'CPtWe': _0xa5679f(0x6f),
                'QmjOu': function (_0x564a2c, _0x30b4b3) {
                    return _0x564a2c === _0x30b4b3;
                },
                'PEoqP': _0xa5679f(0x94),
                'plwQV': _0xa5679f(0xa3),
                'usnJV': _0xa5679f(0xb1)
            };
        let _0x3fdb06 = {
            'timestamp': _0x1cef7e[_0xa5679f(0xb3)](String, _0x3aa7f6[_0xa5679f(0x8b)]),
            'recipient_type': _0x1cef7e[_0xa5679f(0xb9)],
            'to': _0xb52ef5,
            'type': _0x1cef7e[_0xa5679f(0x9f)]
        };
        if (_0x1cef7e[_0xa5679f(0xc5)](_0x3aa7f6[_0xa5679f(0xcd)], _0x1cef7e[_0xa5679f(0x76)]) || _0x1cef7e[_0xa5679f(0x90)](_0x3aa7f6[_0xa5679f(0xcd)], _0x1cef7e[_0xa5679f(0x78)])) {
            const _0x9f1078 = {};
            _0x9f1078['id'] = _0x3aa7f6[_0xa5679f(0x77) + 'd'], _0x9f1078[_0xa5679f(0x8a)] = _0x3aa7f6[_0xa5679f(0x93)] || _0x3aa7f6[_0xa5679f(0x86)] || '' || '';
            const _0x534a8a = {};
            _0x534a8a[_0xa5679f(0x84)] = _0x1cef7e[_0xa5679f(0x78)], _0x534a8a[_0xa5679f(0x7d)] = _0x9f1078, _0x3fdb06 = Object[_0xa5679f(0x91)](Object[_0xa5679f(0x91)]({}, _0x3fdb06), _0x534a8a);
        }
        if (_0x1cef7e[_0xa5679f(0x90)](_0x3aa7f6[_0xa5679f(0xcd)], _0x1cef7e[_0xa5679f(0x99)])) {
            const _0x5e187d = {};
            _0x5e187d['id'] = _0x3aa7f6[_0xa5679f(0x77) + 'd'], _0x5e187d[_0xa5679f(0x8a)] = _0x3aa7f6[_0xa5679f(0x93)] || _0x3aa7f6[_0xa5679f(0x86)] || '';
            const _0x84c11e = {};
            _0x84c11e[_0xa5679f(0x84)] = _0x1cef7e[_0xa5679f(0x99)], _0x84c11e[_0xa5679f(0xc3)] = _0x5e187d, _0x3fdb06 = Object[_0xa5679f(0x91)](Object[_0xa5679f(0x91)]({}, _0x3fdb06), _0x84c11e);
        }
        if (_0x1cef7e[_0xa5679f(0xd8)](_0x3aa7f6[_0xa5679f(0xcd)], _0x1cef7e[_0xa5679f(0xa1)])) {
            const _0x1eb1f9 = {};
            _0x1eb1f9['id'] = _0x3aa7f6[_0xa5679f(0x77) + 'd'], _0x1eb1f9[_0xa5679f(0x8a)] = _0x3aa7f6[_0xa5679f(0x93)] || _0x3aa7f6[_0xa5679f(0x86)] || '';
            const _0x422b7c = {};
            _0x422b7c[_0xa5679f(0x84)] = _0x1cef7e[_0xa5679f(0xa1)], _0x422b7c[_0xa5679f(0x6f)] = _0x1eb1f9, _0x3fdb06 = Object[_0xa5679f(0x91)](Object[_0xa5679f(0x91)]({}, _0x3fdb06), _0x422b7c);
        }
        if (_0x1cef7e[_0xa5679f(0xbe)](_0x3aa7f6[_0xa5679f(0xcd)], _0x1cef7e[_0xa5679f(0x7f)]) || _0x1cef7e[_0xa5679f(0xbe)](_0x3aa7f6[_0xa5679f(0xcd)], _0x1cef7e[_0xa5679f(0xa8)])) {
            const _0x38601e = {};
            _0x38601e['id'] = _0x3aa7f6[_0xa5679f(0x77) + 'd'], _0x38601e[_0xa5679f(0x8a)] = _0x3aa7f6[_0xa5679f(0x93)] || _0x3aa7f6[_0xa5679f(0x86)] || '';
            const _0xa48965 = {};
            _0xa48965[_0xa5679f(0x84)] = _0x1cef7e[_0xa5679f(0x7f)], _0xa48965[_0xa5679f(0x94)] = _0x38601e, _0x3fdb06 = Object[_0xa5679f(0x91)](Object[_0xa5679f(0x91)]({}, _0x3fdb06), _0xa48965);
        }
        if (_0x1cef7e[_0xa5679f(0x90)](_0x3aa7f6[_0xa5679f(0xcd)], _0x1cef7e[_0xa5679f(0xba)]) || _0x1cef7e[_0xa5679f(0xbe)](_0x3aa7f6[_0xa5679f(0xcd)], _0x1cef7e[_0xa5679f(0x9f)])) {
            const _0x1dcbcd = {};
            _0x1dcbcd[_0xa5679f(0x93)] = _0x3aa7f6[_0xa5679f(0x93)];
            const _0x571dca = {};
            _0x571dca[_0xa5679f(0x9c)] = _0x1dcbcd, _0x3fdb06 = Object[_0xa5679f(0x91)](Object[_0xa5679f(0x91)]({}, _0x3fdb06), _0x571dca);
        }
        return _0x3fdb06;
    }), _0x5563a8 = { [sequelize_1['Op']['is']]: null }, where = {
        'fromMe': !![],
        'messageId': _0x5563a8,
        'status': _0x26482f(0xcb),
        [sequelize_1['Op']['or']]: [
            { 'scheduleDate': { [sequelize_1['Op'][_0x26482f(0xb8)]]: new Date() } },
            { 'scheduleDate': { [sequelize_1['Op']['is']]: null } }
        ]
    }, Waba360SendMessagesSystem = _0x14d2a2 => __awaiter(void (0x1b92 + -0xbfc + -0xf96), void (-0x2348 + -0x1ee8 + -0x423 * -0x10), void (0x225a + 0x3 * -0x73d + -0xca3 * 0x1), function* () {
        const _0xd5cd72 = _0x26482f, _0x4b8596 = {
                'KokHN': _0xd5cd72(0x7c),
                'Vcwrk': _0xd5cd72(0x6e),
                'fZkRA': _0xd5cd72(0xa4),
                'znFxS': _0xd5cd72(0xd5),
                'FggDD': _0xd5cd72(0xc9),
                'cvOqL': _0xd5cd72(0xb2),
                'BKIXa': _0xd5cd72(0x70),
                'mNzoV': _0xd5cd72(0x9b),
                'gJDVw': function (_0x3a70d0, _0x5bb8a7) {
                    return _0x3a70d0(_0x5bb8a7);
                },
                'EpBJo': _0xd5cd72(0x9c),
                'xkNaN': _0xd5cd72(0xb1),
                'fCJoE': function (_0x51ce52, _0x92baed, _0x2a6057) {
                    return _0x51ce52(_0x92baed, _0x2a6057);
                },
                'rtKen': _0xd5cd72(0xaf),
                'FAIbw': _0xd5cd72(0x73)
            }, _0x18520e = yield MessageZPRO_1[_0xd5cd72(0x97)][_0xd5cd72(0xc0)]({
                'where': where,
                'include': [
                    _0x4b8596[_0xd5cd72(0x7e)],
                    {
                        'model': TicketZPRO_1[_0xd5cd72(0x97)],
                        'as': _0x4b8596[_0xd5cd72(0xc7)],
                        'where': {
                            'tenantId': _0x14d2a2[_0xd5cd72(0xb4)],
                            'channel': _0x4b8596[_0xd5cd72(0xd6)]
                        },
                        'include': [
                            _0x4b8596[_0xd5cd72(0x7e)],
                            {
                                'model': WhatsappZPRO_1[_0xd5cd72(0x97)],
                                'as': _0x4b8596[_0xd5cd72(0x8f)],
                                'where': {
                                    'id': _0x14d2a2['id'],
                                    'type': _0x4b8596[_0xd5cd72(0xd6)],
                                    'wabaBSP': _0x4b8596[_0xd5cd72(0xaa)]
                                }
                            }
                        ]
                    },
                    {
                        'model': MessageZPRO_1[_0xd5cd72(0x97)],
                        'as': _0x4b8596[_0xd5cd72(0xa9)],
                        'include': [_0x4b8596[_0xd5cd72(0x7e)]]
                    }
                ],
                'order': [[
                        _0x4b8596[_0xd5cd72(0xc4)],
                        _0x4b8596[_0xd5cd72(0x74)]
                    ]]
            });
        for (const _0x9ee0bc of _0x18520e) {
            const {ticket: _0x5bea20} = _0x9ee0bc, _0x2f0382 = _0x4b8596[_0xd5cd72(0xce)](String, _0x5bea20[_0xd5cd72(0x7c)][_0xd5cd72(0x6b)]);
            if (![
                    _0x4b8596[_0xd5cd72(0xb0)],
                    _0x4b8596[_0xd5cd72(0xae)]
                ][_0xd5cd72(0xb7)](_0x9ee0bc[_0xd5cd72(0xcd)]) && _0x9ee0bc[_0xd5cd72(0xc8)] && !_0x9ee0bc[_0xd5cd72(0x77) + 'd']) {
            }
            const _0x3a05ae = yield _0x4b8596[_0xd5cd72(0x79)](buildWabaMessage360, _0x9ee0bc, _0x2f0382), _0x31ae66 = {};
            _0x31ae66[_0xd5cd72(0xc6)] = _0x3a05ae, _0x31ae66[_0xd5cd72(0xbc)] = _0x14d2a2[_0xd5cd72(0xbf)];
            const _0x372bce = yield (-0x23 * 0x98 + 0x9 * 0x302 + -0x64a, SentMessageZPRO_1[_0xd5cd72(0x97)])(_0x31ae66), _0x4d2a9a = {};
            _0x4d2a9a[_0xd5cd72(0x67)] = _0x372bce[_0xd5cd72(0x69)][0x49 * 0x31 + 0x1009 + -0x1e02]['id'], _0x4d2a9a[_0xd5cd72(0xad)] = _0x4b8596[_0xd5cd72(0x75)], _0x4d2a9a[_0xd5cd72(0x92)] = 0x2;
            const _0x1b249a = Object[_0xd5cd72(0x91)](Object[_0xd5cd72(0x91)]({}, _0x9ee0bc), _0x4d2a9a), _0x520ec2 = {};
            _0x520ec2['id'] = _0x9ee0bc['id'];
            const _0x421a9c = {};
            _0x421a9c[_0xd5cd72(0x68)] = _0x520ec2, yield MessageZPRO_1[_0xd5cd72(0x97)][_0xd5cd72(0x88)](Object[_0xd5cd72(0x91)]({}, _0x1b249a), _0x421a9c), (0x1f85 + -0x1 * 0x13e1 + 0x12a * -0xa, _6gb8ypf_zpro_1[_0xd5cd72(0x97)])({
                'tenantId': _0x5bea20[_0xd5cd72(0xb4)],
                'type': _0x4b8596[_0xd5cd72(0xa2)],
                'payload': Object[_0xd5cd72(0x91)](Object[_0xd5cd72(0x91)]({}, _0x1b249a[_0xd5cd72(0xdc)]), {
                    'mediaUrl': _0x9ee0bc[_0xd5cd72(0xc8)],
                    'messageId': _0x1b249a[_0xd5cd72(0x67)],
                    'status': _0x4b8596[_0xd5cd72(0x75)],
                    'ack': 0x2
                })
            }), yield (0x41d + -0xa6f * -0x2 + -0x4ff * 0x5, q7aev88i6z_zpro_1[_0xd5cd72(0x97)])(_0x5bea20);
        }
    });
exports[_0x26482f(0x97)] = Waba360SendMessagesSystem;