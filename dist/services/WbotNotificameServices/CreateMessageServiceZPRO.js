'use strict';
const _0x28801c = _0x26b7;
(function (_0x2cf519, _0x562b9e) {
    const _0x184173 = _0x26b7, _0x1d3ec8 = _0x2cf519();
    while (!![]) {
        try {
            const _0x4bf392 = -parseInt(_0x184173(0x110)) / (-0x808 + -0x1584 + -0x11 * -0x1bd) + -parseInt(_0x184173(0x107)) / (-0x2 * 0x1297 + 0x1ac3 + 0x9d * 0x11) + parseInt(_0x184173(0x123)) / (-0x2d * 0x7a + 0x201e + -0xaa9) * (parseInt(_0x184173(0x14b)) / (0x6b8 * -0x5 + 0x1bf4 + 0xb5 * 0x8)) + -parseInt(_0x184173(0xdd)) / (0xbea * 0x1 + 0x8ae + -0xe5 * 0x17) + -parseInt(_0x184173(0x12c)) / (0x585 + -0x5c0 + 0x41) + -parseInt(_0x184173(0x14c)) / (-0x1b96 + 0x5c * 0x50 + 0x61 * -0x3) * (parseInt(_0x184173(0x131)) / (0x19ba + -0x2682 + 0xcd0)) + -parseInt(_0x184173(0x104)) / (-0x2 * -0x549 + -0x925 * -0x4 + -0x2f1d) * (-parseInt(_0x184173(0x148)) / (0x1 * 0xf95 + -0x172a + 0x79f));
            if (_0x4bf392 === _0x562b9e)
                break;
            else
                _0x1d3ec8['push'](_0x1d3ec8['shift']());
        } catch (_0x24a01d) {
            _0x1d3ec8['push'](_0x1d3ec8['shift']());
        }
    }
}(_0x33bc, 0x7094d + 0x36 * -0x1c7b + 0x41c2e));
var __awaiter = this && this[_0x28801c(0xee)] || function (_0x1046a1, _0x399c67, _0x30538c, _0x3132cc) {
        const _0x483c43 = _0x28801c, _0x245b2d = {
                'bxBfl': function (_0x407d08, _0x5f2e69) {
                    return _0x407d08(_0x5f2e69);
                },
                'BsDmR': function (_0x423b32, _0x1c1e77) {
                    return _0x423b32 instanceof _0x1c1e77;
                },
                'eKFVR': function (_0x5069ea, _0x10a555) {
                    return _0x5069ea(_0x10a555);
                },
                'dfcwv': _0x483c43(0x142),
                'FOWru': function (_0x5a3218, _0x157c3b) {
                    return _0x5a3218(_0x157c3b);
                },
                'xcwCa': function (_0x508961, _0x26c79a) {
                    return _0x508961(_0x26c79a);
                }
            };
        function _0x1f5b16(_0x409a87) {
            const _0x15752d = _0x483c43, _0xb3db35 = {
                    'lMEAN': function (_0x7c05ef, _0x43097e) {
                        const _0x2085ee = _0x26b7;
                        return _0x245b2d[_0x2085ee(0x10d)](_0x7c05ef, _0x43097e);
                    }
                };
            return _0x245b2d[_0x15752d(0x12b)](_0x409a87, _0x30538c) ? _0x409a87 : new _0x30538c(function (_0x580757) {
                const _0xb0c583 = _0x15752d;
                _0xb3db35[_0xb0c583(0xda)](_0x580757, _0x409a87);
            });
        }
        return new (_0x30538c || (_0x30538c = Promise))(function (_0x444869, _0x464e7c) {
            const _0x5e6578 = _0x483c43, _0x31e72e = {
                    'NFlti': function (_0x175611, _0x442d25) {
                        const _0x9e2ba8 = _0x26b7;
                        return _0x245b2d[_0x9e2ba8(0x10d)](_0x175611, _0x442d25);
                    },
                    'wyHmZ': _0x245b2d[_0x5e6578(0xdc)],
                    'wYxGF': function (_0x14b35e, _0x5c2ef6) {
                        const _0x1c8d49 = _0x5e6578;
                        return _0x245b2d[_0x1c8d49(0x133)](_0x14b35e, _0x5c2ef6);
                    },
                    'rCsmY': function (_0x4fb1f9, _0x39db30) {
                        const _0x29e1d8 = _0x5e6578;
                        return _0x245b2d[_0x29e1d8(0x10d)](_0x4fb1f9, _0x39db30);
                    },
                    'IWedi': function (_0x440333, _0x11fa64) {
                        const _0x370e20 = _0x5e6578;
                        return _0x245b2d[_0x370e20(0x109)](_0x440333, _0x11fa64);
                    }
                };
            function _0x2eb8bd(_0x235880) {
                const _0x4921d2 = _0x5e6578;
                try {
                    _0x245b2d[_0x4921d2(0x10d)](_0x4e66ba, _0x3132cc[_0x4921d2(0x146)](_0x235880));
                } catch (_0x504791) {
                    _0x245b2d[_0x4921d2(0x133)](_0x464e7c, _0x504791);
                }
            }
            function _0xb6a30f(_0x5a75ce) {
                const _0x454f8b = _0x5e6578;
                try {
                    _0x31e72e[_0x454f8b(0x120)](_0x4e66ba, _0x3132cc[_0x31e72e[_0x454f8b(0x10e)]](_0x5a75ce));
                } catch (_0x143210) {
                    _0x31e72e[_0x454f8b(0xe5)](_0x464e7c, _0x143210);
                }
            }
            function _0x4e66ba(_0x1bb1e7) {
                const _0xc44980 = _0x5e6578;
                _0x1bb1e7[_0xc44980(0x111)] ? _0x31e72e[_0xc44980(0x105)](_0x444869, _0x1bb1e7[_0xc44980(0x13b)]) : _0x31e72e[_0xc44980(0xf0)](_0x1f5b16, _0x1bb1e7[_0xc44980(0x13b)])[_0xc44980(0x136)](_0x2eb8bd, _0xb6a30f);
            }
            _0x245b2d[_0x5e6578(0x116)](_0x4e66ba, (_0x3132cc = _0x3132cc[_0x5e6578(0x122)](_0x1046a1, _0x399c67 || []))[_0x5e6578(0x146)]());
        });
    }, __importDefault = this && this[_0x28801c(0x102) + _0x28801c(0x13e)] || function (_0x18290b) {
        const _0x12356b = _0x28801c;
        return _0x18290b && _0x18290b[_0x12356b(0x13a)] ? _0x18290b : { 'default': _0x18290b };
    };
const _0x3db8b0 = {};
_0x3db8b0[_0x28801c(0x13b)] = !![], Object[_0x28801c(0xf5) + _0x28801c(0x13d)](exports, _0x28801c(0x13a), _0x3db8b0);
function _0x33bc() {
    const _0x146645 = [
        'fromMe',
        'chat:creat',
        'defineProp',
        'vtsUH',
        'wSodr',
        'czKqz',
        'zpro',
        'getTime',
        'timestamp',
        'ZQXFb',
        'ls/Message',
        'sMgid',
        'userId',
        'create',
        'log',
        '__importDe',
        'ls/UserZPR',
        '77895FCTpva',
        'rCsmY',
        'ls/TicketZ',
        '27396rbzSuy',
        'messageId',
        'FOWru',
        '7tljfp_zpr',
        '../../974u',
        'ERR_CREATI',
        'bxBfl',
        'wyHmZ',
        'logger',
        '397053WwvxbG',
        'done',
        'sbvih',
        'MqdWg',
        '../../bz7a',
        'read',
        'xcwCa',
        'o/6gb8ypf_',
        'ls/Contact',
        '_SYSTEM\x202',
        'warn',
        'user',
        'mediaUrl',
        '\x20message\x20e',
        'where',
        'RcQGw',
        'NFlti',
        'type',
        'apply',
        '3MxOlNf',
        'idFront',
        'default',
        'ticketId',
        'status',
        'findByPk',
        'info',
        'gcOTt',
        'BsDmR',
        '2702652FPjNTr',
        'UkKKG',
        'xists',
        'NG_MESSAGE',
        'contact',
        '3330416aEwVUZ',
        'PRO',
        'eKFVR',
        'photo',
        'image',
        'then',
        ':\x20e8',
        'model',
        'ticket',
        '__esModule',
        'value',
        'contactId',
        'erty',
        'fault',
        'quotedMsg',
        'tenantId',
        '\x20message\x20',
        'throw',
        'length',
        'payload',
        'mediaType',
        'next',
        'findOne',
        '1250kOwSjA',
        '../../mode',
        'body',
        '2519588sQiTFZ',
        '7kJPpaF',
        'toString',
        'include',
        'sended',
        'juLkU',
        'lMEAN',
        'hIofC',
        'dfcwv',
        '487500PDujbn',
        'ack',
        'tMOQf',
        ':\x20Creating',
        'Cwrww',
        'update',
        'name',
        'UfAOU',
        'wYxGF',
        ':::\x20Z-PRO\x20',
        'ZPRO',
        'mw_zpro/tv',
        'uuid',
        'qbUnT',
        'scheduleDa',
        'error',
        ':::\x20ZDG\x20::',
        '__awaiter',
        'aBGSJ',
        'IWedi',
        'hvIwn',
        'bp8dlkc2o_'
    ];
    _0x33bc = function () {
        return _0x146645;
    };
    return _0x33bc();
}
function _0x26b7(_0x5c48a6, _0x5ae976) {
    const _0x1c6dfc = _0x33bc();
    return _0x26b7 = function (_0x3c2eff, _0x145ca) {
        _0x3c2eff = _0x3c2eff - (-0x1 * 0x3e1 + 0x1 * -0x6dd + 0xb97);
        let _0x552f6d = _0x1c6dfc[_0x3c2eff];
        return _0x552f6d;
    }, _0x26b7(_0x5c48a6, _0x5ae976);
}
const MessageZPRO_1 = __importDefault(require(_0x28801c(0x149) + _0x28801c(0xfd) + _0x28801c(0xe7))), tvbp8dlkc2o_zpro_1 = require(_0x28801c(0x114) + _0x28801c(0xe8) + _0x28801c(0xf2) + _0x28801c(0xf9)), _6gb8ypf_zpro_1 = __importDefault(require(_0x28801c(0x10b) + _0x28801c(0x10a) + _0x28801c(0x117) + _0x28801c(0xf9))), uuid_1 = require(_0x28801c(0xe9)), TicketZPRO_1 = __importDefault(require(_0x28801c(0x149) + _0x28801c(0x106) + _0x28801c(0x132))), UserZPRO_1 = __importDefault(require(_0x28801c(0x149) + _0x28801c(0x103) + 'O')), ContactZPRO_1 = __importDefault(require(_0x28801c(0x149) + _0x28801c(0x118) + _0x28801c(0xe7))), CreateMessageService = _0x2124a8 => __awaiter(void (-0x8 * 0xbb + 0x2258 + -0x130 * 0x18), void (-0x17ba + 0x1 * -0x20ba + 0x2 * 0x1c3a), void (0x926 * 0x3 + 0x14ef + -0x3061), function* () {
        const _0x2a45e6 = _0x28801c, _0x4c223f = {};
        _0x4c223f[_0x2a45e6(0x113)] = _0x2a45e6(0xe6) + _0x2a45e6(0xed) + _0x2a45e6(0xe0) + _0x2a45e6(0x141), _0x4c223f[_0x2a45e6(0xf8)] = _0x2a45e6(0xe6) + _0x2a45e6(0xed) + _0x2a45e6(0xe0) + _0x2a45e6(0x11d) + _0x2a45e6(0x12e), _0x4c223f[_0x2a45e6(0xdf)] = function (_0x1814be, _0x22168e) {
            return _0x1814be === _0x22168e;
        }, _0x4c223f[_0x2a45e6(0x12a)] = function (_0x10586a, _0xdeee99) {
            return _0x10586a === _0xdeee99;
        }, _0x4c223f[_0x2a45e6(0xea)] = _0x2a45e6(0x14f), _0x4c223f[_0x2a45e6(0xe1)] = _0x2a45e6(0x134), _0x4c223f[_0x2a45e6(0xfc)] = _0x2a45e6(0x135), _0x4c223f[_0x2a45e6(0xf1)] = _0x2a45e6(0x139), _0x4c223f[_0x2a45e6(0xd9)] = _0x2a45e6(0x130), _0x4c223f[_0x2a45e6(0xf6)] = _0x2a45e6(0x13f), _0x4c223f[_0x2a45e6(0x12d)] = _0x2a45e6(0x11b), _0x4c223f[_0x2a45e6(0xf7)] = _0x2a45e6(0xe3), _0x4c223f[_0x2a45e6(0xfe)] = function (_0x26e464, _0x1a37c3) {
            return _0x26e464 >= _0x1a37c3;
        }, _0x4c223f[_0x2a45e6(0xdb)] = _0x2a45e6(0xec), _0x4c223f[_0x2a45e6(0xe4)] = _0x2a45e6(0x10c) + _0x2a45e6(0x12f) + _0x2a45e6(0x119), _0x4c223f[_0x2a45e6(0x11f)] = _0x2a45e6(0xf4) + 'e', _0x4c223f[_0x2a45e6(0x112)] = function (_0x1d2854, _0x5ce4d1) {
            return _0x1d2854 + _0x5ce4d1;
        }, _0x4c223f[_0x2a45e6(0xef)] = _0x2a45e6(0xe6) + _0x2a45e6(0xed) + _0x2a45e6(0x137);
        const _0x3df76f = _0x4c223f;
        var _0x1434f0, _0x122719;
        tvbp8dlkc2o_zpro_1[_0x2a45e6(0x10f)][_0x2a45e6(0x129)](_0x3df76f[_0x2a45e6(0x113)]);
        const _0x55b15b = {};
        _0x55b15b[_0x2a45e6(0x108)] = _0x2124a8['id'], _0x55b15b[_0x2a45e6(0x140)] = _0x2124a8[_0x2a45e6(0x140)];
        const _0x511482 = {};
        _0x511482[_0x2a45e6(0x11e)] = _0x55b15b;
        const _0x3ecb59 = yield MessageZPRO_1[_0x2a45e6(0x125)][_0x2a45e6(0x147)](_0x511482);
        if (_0x3ecb59) {
            tvbp8dlkc2o_zpro_1[_0x2a45e6(0x10f)][_0x2a45e6(0x129)](_0x3df76f[_0x2a45e6(0xf8)]);
            return;
        }
        const {
            id: _0x7dac32,
            contactId: _0xb0c9db,
            body: _0x29471f,
            ticketId: _0xa3a907,
            fromMe: _0x429d3a,
            tenantId: _0x52be4b,
            fileName: _0x5ed150,
            mediaType: _0xa53c2d,
            originalName: _0xf6ba31,
            scheduleDate: _0x4d248b,
            ack: _0x343b50,
            userId: _0x2c06fa
        } = _0x2124a8;
        if ((!_0x29471f || _0x3df76f[_0x2a45e6(0xdf)](_0x29471f, '')) && (!_0x5ed150 || _0x3df76f[_0x2a45e6(0x12a)](_0x5ed150, '')))
            return;
        const _0x1c6db8 = (-0x16d7 + 0x1daa + -0x6d3, uuid_1['v4'])(), _0x2a92e3 = {};
        _0x2a92e3[_0x2a45e6(0x13c)] = _0xb0c9db, _0x2a92e3[_0x2a45e6(0x14a)] = _0x29471f, _0x2a92e3[_0x2a45e6(0x126)] = _0xa3a907, _0x2a92e3[_0x2a45e6(0xf3)] = _0x429d3a, _0x2a92e3[_0x2a45e6(0x140)] = _0x52be4b, _0x2a92e3[_0x2a45e6(0x108)] = _0x7dac32, _0x2a92e3[_0x2a45e6(0xde)] = 0x2, _0x2a92e3[_0x2a45e6(0x127)] = _0x3df76f[_0x2a45e6(0xea)], _0x2a92e3[_0x2a45e6(0x124)] = _0x1c6db8, _0x2a92e3[_0x2a45e6(0x115)] = ![], _0x2a92e3[_0x2a45e6(0xeb) + 'te'] = _0x4d248b, _0x2a92e3[_0x2a45e6(0xff)] = _0x2c06fa;
        const _0x4e36e1 = _0x2a92e3;
        _0x5ed150 && (_0x4e36e1[_0x2a45e6(0x11c)] = _0x5ed150, _0x4e36e1[_0x2a45e6(0x145)] = _0x3df76f[_0x2a45e6(0xdf)](_0xa53c2d, _0x3df76f[_0x2a45e6(0xe1)]) ? _0x3df76f[_0x2a45e6(0xfc)] : _0xa53c2d);
        try {
            const _0x459ef5 = yield MessageZPRO_1[_0x2a45e6(0x125)][_0x2a45e6(0x100)](_0x4e36e1), _0x14b99d = {};
            _0x14b99d[_0x2a45e6(0x140)] = _0x52be4b;
            const _0x22d68a = {};
            _0x22d68a[_0x2a45e6(0x138)] = TicketZPRO_1[_0x2a45e6(0x125)], _0x22d68a['as'] = _0x3df76f[_0x2a45e6(0xf1)], _0x22d68a[_0x2a45e6(0x11e)] = _0x14b99d, _0x22d68a[_0x2a45e6(0x14e)] = [_0x3df76f[_0x2a45e6(0xd9)]];
            const _0x32c7d4 = yield MessageZPRO_1[_0x2a45e6(0x125)][_0x2a45e6(0x128)](_0x459ef5['id'], {
                'include': [
                    _0x22d68a,
                    {
                        'model': MessageZPRO_1[_0x2a45e6(0x125)],
                        'as': _0x3df76f[_0x2a45e6(0xf6)],
                        'include': [_0x3df76f[_0x2a45e6(0xd9)]]
                    },
                    {
                        'model': UserZPRO_1[_0x2a45e6(0x125)],
                        'as': _0x3df76f[_0x2a45e6(0x12d)],
                        'attributes': [
                            'id',
                            _0x3df76f[_0x2a45e6(0xf7)]
                        ]
                    },
                    {
                        'model': ContactZPRO_1[_0x2a45e6(0x125)],
                        'as': _0x3df76f[_0x2a45e6(0xd9)],
                        'attributes': [
                            'id',
                            _0x3df76f[_0x2a45e6(0xf7)]
                        ]
                    }
                ]
            });
            if (_0x32c7d4)
                try {
                    yield _0x32c7d4[_0x2a45e6(0x139)][_0x2a45e6(0xe2)]({
                        'lastMessageAt': _0x3df76f[_0x2a45e6(0xfe)](_0x3df76f[_0x2a45e6(0xdf)](_0x1434f0 = _0x32c7d4[_0x2a45e6(0xfb)], null) || _0x3df76f[_0x2a45e6(0xdf)](_0x1434f0, void (0xe68 + -0x21ef + -0x1 * -0x1387)) ? void (0x8 * 0x3a7 + -0xd4d + -0xfeb) : _0x1434f0[_0x2a45e6(0x14d)]()[_0x2a45e6(0x143)], 0x83d + 0x841 + 0x17 * -0xb7) ? _0x32c7d4[_0x2a45e6(0xfb)] : new Date()[_0x2a45e6(0xfa)](),
                        'lastMessageReceived': _0x32c7d4[_0x2a45e6(0xf3)] ? null : new Date()[_0x2a45e6(0xfa)]()
                    });
                } catch (_0x41cbaf) {
                    console[_0x2a45e6(0x101)](_0x3df76f[_0x2a45e6(0xdb)], _0x41cbaf);
                }
            if (!_0x32c7d4)
                throw new Error(_0x3df76f[_0x2a45e6(0xe4)]);
            _0x32c7d4[_0x2a45e6(0xf3)] && (yield TicketZPRO_1[_0x2a45e6(0x125)][_0x2a45e6(0xe2)]({ 'lastMessageReceived': _0x3df76f[_0x2a45e6(0xfe)](_0x3df76f[_0x2a45e6(0x12a)](_0x122719 = _0x32c7d4[_0x2a45e6(0xfb)], null) || _0x3df76f[_0x2a45e6(0xdf)](_0x122719, void (0x1 * -0xf89 + -0x38 * -0x3 + 0xee1)) ? void (-0x26a5 + -0x6 * 0x40e + -0x2f * -0x157) : _0x122719[_0x2a45e6(0x14d)]()[_0x2a45e6(0x143)], -0x10c1 + 0x1b5c + -0xa8e) ? _0x32c7d4[_0x2a45e6(0xfb)] : new Date()[_0x2a45e6(0xfa)]() }, { 'where': { 'id': _0x32c7d4[_0x2a45e6(0x126)] } }));
            const _0x4cec86 = {};
            return _0x4cec86[_0x2a45e6(0x140)] = _0x52be4b, _0x4cec86[_0x2a45e6(0x121)] = _0x3df76f[_0x2a45e6(0x11f)], _0x4cec86[_0x2a45e6(0x144)] = _0x32c7d4, (0x389 * -0x7 + 0x1 * -0x157f + 0x2e3e, _6gb8ypf_zpro_1[_0x2a45e6(0x125)])(_0x4cec86), _0x459ef5;
        } catch (_0x409341) {
            tvbp8dlkc2o_zpro_1[_0x2a45e6(0x10f)][_0x2a45e6(0x11a)](_0x3df76f[_0x2a45e6(0x112)](_0x3df76f[_0x2a45e6(0xef)], _0x409341));
        }
    });
exports[_0x28801c(0x125)] = CreateMessageService;