'use strict';
const _0x38844e = _0x1dc1;
(function (_0x64fdfa, _0x586239) {
    const _0x5f00cf = _0x1dc1, _0x5ef444 = _0x64fdfa();
    while (!![]) {
        try {
            const _0x364a7c = -parseInt(_0x5f00cf(0x146)) / (-0x1f5d + 0x1749 * 0x1 + 0x815) + -parseInt(_0x5f00cf(0x120)) / (-0x42f + 0x25c4 + -0x2d * 0xbf) + -parseInt(_0x5f00cf(0x125)) / (-0x107b * -0x1 + 0x48e + -0x1506) * (-parseInt(_0x5f00cf(0x122)) / (-0x1543 + 0xe44 + 0x167 * 0x5)) + -parseInt(_0x5f00cf(0x138)) / (-0x1c73 + -0x1279 + -0x2ef1 * -0x1) * (parseInt(_0x5f00cf(0x128)) / (-0x1eee + -0x9a1 + -0x1 * -0x2895)) + -parseInt(_0x5f00cf(0x11f)) / (0x1 * 0x1a14 + -0x4 * 0x143 + -0x1501) + -parseInt(_0x5f00cf(0x12b)) / (-0x1 * -0x65 + 0xe6a + -0xec7) + -parseInt(_0x5f00cf(0x154)) / (0x23cd + -0x64b + -0x1d79) * (-parseInt(_0x5f00cf(0x14c)) / (0x1be0 + 0x1 * -0x22a6 + 0x368 * 0x2));
            if (_0x364a7c === _0x586239)
                break;
            else
                _0x5ef444['push'](_0x5ef444['shift']());
        } catch (_0x3a2c23) {
            _0x5ef444['push'](_0x5ef444['shift']());
        }
    }
}(_0x58d9, 0x2 * 0x6a2a6 + 0x10f * -0xcf7 + -0x729 * -0x115));
var __awaiter = this && this[_0x38844e(0x147)] || function (_0x2dbdbd, _0x4abf12, _0x4dbeea, _0x593f50) {
        const _0x18d8ce = _0x38844e, _0x54c22b = {
                'QSPUh': function (_0x12cee1, _0x4b356d) {
                    return _0x12cee1(_0x4b356d);
                },
                'kYhnr': function (_0x3c2288, _0x191207) {
                    return _0x3c2288 instanceof _0x191207;
                },
                'CmUxv': function (_0x5f2a32, _0x134681) {
                    return _0x5f2a32(_0x134681);
                },
                'WuNKf': function (_0xdc2f99, _0x2ebbd4) {
                    return _0xdc2f99(_0x2ebbd4);
                },
                'IcseB': function (_0x2460e5, _0x64d4a3) {
                    return _0x2460e5(_0x64d4a3);
                },
                'TmcBp': _0x18d8ce(0x148),
                'hYlBI': function (_0x5239cf, _0x5df525) {
                    return _0x5239cf(_0x5df525);
                },
                'zcsnX': function (_0xf8da11, _0x486c2c) {
                    return _0xf8da11(_0x486c2c);
                },
                'uIGqP': function (_0x4aed07, _0x23d1b9) {
                    return _0x4aed07(_0x23d1b9);
                },
                'iuGAx': function (_0x317e9f, _0x1b46b6) {
                    return _0x317e9f(_0x1b46b6);
                }
            };
        function _0x11eb6e(_0x45fba7) {
            const _0x342b3b = _0x18d8ce, _0x2dd988 = {
                    'iCDGI': function (_0x44d6d7, _0x3f9bee) {
                        const _0xef69ae = _0x1dc1;
                        return _0x54c22b[_0xef69ae(0x121)](_0x44d6d7, _0x3f9bee);
                    }
                };
            return _0x54c22b[_0x342b3b(0x11c)](_0x45fba7, _0x4dbeea) ? _0x45fba7 : new _0x4dbeea(function (_0x23bf29) {
                const _0x42d0b1 = _0x342b3b;
                _0x2dd988[_0x42d0b1(0x140)](_0x23bf29, _0x45fba7);
            });
        }
        return new (_0x4dbeea || (_0x4dbeea = Promise))(function (_0x486d6d, _0x4ccfa1) {
            const _0x45dd4d = _0x18d8ce;
            function _0x3492c9(_0xc495a4) {
                const _0x58cfcf = _0x1dc1;
                try {
                    _0x54c22b[_0x58cfcf(0x116)](_0x930994, _0x593f50[_0x58cfcf(0x13c)](_0xc495a4));
                } catch (_0x1ea07b) {
                    _0x54c22b[_0x58cfcf(0x13d)](_0x4ccfa1, _0x1ea07b);
                }
            }
            function _0x1e67f1(_0x5b87e7) {
                const _0x1050fa = _0x1dc1;
                try {
                    _0x54c22b[_0x1050fa(0x151)](_0x930994, _0x593f50[_0x54c22b[_0x1050fa(0x11b)]](_0x5b87e7));
                } catch (_0x1f73a7) {
                    _0x54c22b[_0x1050fa(0x12d)](_0x4ccfa1, _0x1f73a7);
                }
            }
            function _0x930994(_0x4c01ab) {
                const _0x429470 = _0x1dc1;
                _0x4c01ab[_0x429470(0x131)] ? _0x54c22b[_0x429470(0x139)](_0x486d6d, _0x4c01ab[_0x429470(0x143)]) : _0x54c22b[_0x429470(0x12c)](_0x11eb6e, _0x4c01ab[_0x429470(0x143)])[_0x429470(0x145)](_0x3492c9, _0x1e67f1);
            }
            _0x54c22b[_0x45dd4d(0x12e)](_0x930994, (_0x593f50 = _0x593f50[_0x45dd4d(0x124)](_0x2dbdbd, _0x4abf12 || []))[_0x45dd4d(0x13c)]());
        });
    }, __importDefault = this && this[_0x38844e(0x12a) + _0x38844e(0x117)] || function (_0xb35a9a) {
        const _0x4dcd7c = _0x38844e;
        return _0xb35a9a && _0xb35a9a[_0x4dcd7c(0x14a)] ? _0xb35a9a : { 'default': _0xb35a9a };
    };
function _0x58d9() {
    const _0x1ebc03 = [
        'read',
        'assign',
        'done',
        'chat:ack',
        'o/6gb8ypf_',
        'update',
        'IHBzx',
        'erty',
        'ls/TicketZ',
        '2710IjOSnR',
        'zcsnX',
        'zpro',
        'findAll',
        'next',
        'WuNKf',
        'default',
        'timestamp',
        'iCDGI',
        'all',
        'PRO',
        'value',
        'sended',
        'then',
        '721946wjyORC',
        '__awaiter',
        'throw',
        '../../974u',
        '__esModule',
        'map',
        '30IhrXME',
        '7tljfp_zpr',
        'dataValues',
        'mediaUrl',
        'messageId',
        'IcseB',
        '../../mode',
        'ack',
        '5787387CnFJNv',
        'CmUxv',
        'fault',
        'sequelize',
        'ls/Contact',
        'watermark',
        'TmcBp',
        'kYhnr',
        'defineProp',
        'ls/Message',
        '6303962QNRUry',
        '372324sqQeVz',
        'QSPUh',
        '164092JXKtNk',
        'Dkuoe',
        'apply',
        '69aUsAtC',
        'sender',
        'ZPRO',
        '282ltQLqb',
        'lte',
        '__importDe',
        '4484080jjBuKt',
        'uIGqP',
        'hYlBI',
        'iuGAx'
    ];
    _0x58d9 = function () {
        return _0x1ebc03;
    };
    return _0x58d9();
}
const _0x2897de = {};
function _0x1dc1(_0x37c889, _0x19424c) {
    const _0x30a0dd = _0x58d9();
    return _0x1dc1 = function (_0x2e56f6, _0x1feb9c) {
        _0x2e56f6 = _0x2e56f6 - (-0x1 * 0xaf3 + 0x10c6 * -0x1 + -0x5c3 * -0x5);
        let _0x3644b6 = _0x30a0dd[_0x2e56f6];
        return _0x3644b6;
    }, _0x1dc1(_0x37c889, _0x19424c);
}
_0x2897de[_0x38844e(0x143)] = !![], Object[_0x38844e(0x11d) + _0x38844e(0x136)](exports, _0x38844e(0x14a), _0x2897de);
const sequelize_1 = require(_0x38844e(0x118)), _6gb8ypf_zpro_1 = __importDefault(require(_0x38844e(0x149) + _0x38844e(0x14d) + _0x38844e(0x133) + _0x38844e(0x13a))), ContactZPRO_1 = __importDefault(require(_0x38844e(0x152) + _0x38844e(0x119) + _0x38844e(0x127))), MessageZPRO_1 = __importDefault(require(_0x38844e(0x152) + _0x38844e(0x11e) + _0x38844e(0x127))), TicketZPRO_1 = __importDefault(require(_0x38844e(0x152) + _0x38844e(0x137) + _0x38844e(0x142))), MessengerMarkRead = (_0x4a69eb, _0x70eabe) => __awaiter(void (0x1 * -0xd09 + 0x126d + -0x1e * 0x2e), void (-0x1a63 + 0x6b * -0x11 + 0x217e), void (-0x3 * -0xcfb + -0x245d + 0x42 * -0xa), function* () {
        const _0x5ebf01 = _0x38844e, _0x16caf6 = {};
        _0x16caf6[_0x5ebf01(0x135)] = _0x5ebf01(0x132), _0x16caf6[_0x5ebf01(0x123)] = _0x5ebf01(0x144);
        const _0x5e9094 = _0x16caf6, _0xa1e6f0 = yield MessageZPRO_1[_0x5ebf01(0x13e)][_0x5ebf01(0x13b)]({
                'where': {
                    'tenantId': _0x70eabe,
                    'createdAt': { [sequelize_1['Op'][_0x5ebf01(0x129)]]: new Date(_0x4a69eb[_0x5ebf01(0x12f)][_0x5ebf01(0x11a)]) },
                    'fromMe': !![],
                    'ack': {
                        [sequelize_1['Op']['in']]: [
                            0x1 * -0x3d5 + 0x221e + -0x1e48,
                            0xc5 * 0x1 + 0xfdd + -0x2 * 0x850
                        ]
                    }
                },
                'include': [{
                        'model': TicketZPRO_1[_0x5ebf01(0x13e)],
                        'where': { 'tenantId': _0x70eabe },
                        'include': [{
                                'model': ContactZPRO_1[_0x5ebf01(0x13e)],
                                'where': {
                                    'tenantId': _0x70eabe,
                                    'messengerId': _0x4a69eb[_0x5ebf01(0x126)]['id']
                                }
                            }]
                    }]
            });
        yield Promise[_0x5ebf01(0x141)](_0xa1e6f0[_0x5ebf01(0x14b)](_0x550613 => __awaiter(void (0x51b * -0x1 + 0x2 * -0xbb9 + 0x1c8d), void (-0x1 * 0x823 + -0x1dde + 0x2601), void (-0x2c2 * -0x4 + 0x1a39 + -0x2541), function* () {
            const _0x53b9fa = _0x5ebf01, _0x5e7714 = {};
            _0x5e7714[_0x53b9fa(0x153)] = 0x3, yield _0x550613[_0x53b9fa(0x134)](_0x5e7714), (0x2d * -0x6f + -0x12b3 * 0x1 + 0x2636, _6gb8ypf_zpro_1[_0x53b9fa(0x13e)])({
                'tenantId': _0x70eabe,
                'type': _0x5e9094[_0x53b9fa(0x135)],
                'payload': Object[_0x53b9fa(0x130)](Object[_0x53b9fa(0x130)]({}, _0x550613[_0x53b9fa(0x14e)]), {
                    'mediaUrl': _0x550613[_0x53b9fa(0x14f)],
                    'id': _0x550613['id'],
                    'timestamp': _0x550613[_0x53b9fa(0x13f)],
                    'messageId': _0x550613[_0x53b9fa(0x150)],
                    'status': _0x5e9094[_0x53b9fa(0x123)],
                    'ack': 0x3
                })
            });
        })));
    });
exports[_0x38844e(0x13e)] = MessengerMarkRead;