'use strict';
const _0x5d8f9d = _0xce95;
(function (_0x2bd12a, _0x4f6c24) {
    const _0x5cbac5 = _0xce95, _0x2de991 = _0x2bd12a();
    while (!![]) {
        try {
            const _0x1448b3 = -parseInt(_0x5cbac5(0xed)) / (0xcca + 0xe6 * -0x10 + 0x25 * 0xb) + parseInt(_0x5cbac5(0xfd)) / (-0x20a4 + -0x1c3 * 0x5 + -0x2975 * -0x1) + parseInt(_0x5cbac5(0xe2)) / (0x1 * -0x1fdb + -0x1 * -0xef9 + 0x10e5) + parseInt(_0x5cbac5(0xeb)) / (-0x1 * 0x23bf + -0x131 * -0x8 + 0x1a3b * 0x1) + parseInt(_0x5cbac5(0xd8)) / (-0xa32 + 0x7f9 * -0x3 + 0x2222) + parseInt(_0x5cbac5(0xdd)) / (-0x373 * 0x7 + -0x1667 + 0x1 * 0x2e92) * (parseInt(_0x5cbac5(0x103)) / (0x9 * -0x43b + 0xe * 0x1e2 + 0xbbe)) + -parseInt(_0x5cbac5(0xc5)) / (0x187 * 0x13 + 0xfb4 * -0x1 + 0x13 * -0xb3);
            if (_0x1448b3 === _0x4f6c24)
                break;
            else
                _0x2de991['push'](_0x2de991['shift']());
        } catch (_0x215172) {
            _0x2de991['push'](_0x2de991['shift']());
        }
    }
}(_0x24ac, 0xc06c + -0x1b19c + 0xb04ec));
var __awaiter = this && this[_0x5d8f9d(0xcc)] || function (_0x4b8086, _0x3db6ef, _0x364e3c, _0x328fa9) {
        const _0x264132 = _0x5d8f9d, _0x498e0d = {
                'QQQnU': function (_0x22434f, _0x3a954f) {
                    return _0x22434f(_0x3a954f);
                },
                'ZllNl': function (_0x346f30, _0x50a4de) {
                    return _0x346f30 instanceof _0x50a4de;
                },
                'uGQtA': function (_0x2c0c5d, _0x4c849d) {
                    return _0x2c0c5d(_0x4c849d);
                },
                'pKTYH': function (_0x5d7193, _0x400e07) {
                    return _0x5d7193(_0x400e07);
                },
                'VMKkx': function (_0x19a5ce, _0x5e2e41) {
                    return _0x19a5ce(_0x5e2e41);
                },
                'gQJPq': _0x264132(0x11c),
                'sXGKt': function (_0x2f9a42, _0x4fc100) {
                    return _0x2f9a42(_0x4fc100);
                }
            };
        function _0x2b204c(_0x2820cb) {
            const _0x2d7632 = _0x264132, _0x2b1fdd = {
                    'IbSdy': function (_0x4f622b, _0x189707) {
                        const _0x414db7 = _0xce95;
                        return _0x498e0d[_0x414db7(0xf0)](_0x4f622b, _0x189707);
                    }
                };
            return _0x498e0d[_0x2d7632(0xc6)](_0x2820cb, _0x364e3c) ? _0x2820cb : new _0x364e3c(function (_0x49f420) {
                const _0x18a118 = _0x2d7632;
                _0x2b1fdd[_0x18a118(0x108)](_0x49f420, _0x2820cb);
            });
        }
        return new (_0x364e3c || (_0x364e3c = Promise))(function (_0x284a3c, _0x112852) {
            const _0x2adb72 = _0x264132, _0x159aad = {
                    'fILZr': function (_0x5efc34, _0x5c9564) {
                        const _0x49c50a = _0xce95;
                        return _0x498e0d[_0x49c50a(0xf0)](_0x5efc34, _0x5c9564);
                    },
                    'LMFWU': _0x498e0d[_0x2adb72(0xdb)],
                    'kBYfi': function (_0x2540cb, _0x319874) {
                        const _0x589a0e = _0x2adb72;
                        return _0x498e0d[_0x589a0e(0x10a)](_0x2540cb, _0x319874);
                    }
                };
            function _0x59aa23(_0xc02ab) {
                const _0x18895e = _0x2adb72;
                try {
                    _0x498e0d[_0x18895e(0x10a)](_0x306a31, _0x328fa9[_0x18895e(0x10e)](_0xc02ab));
                } catch (_0x5867c4) {
                    _0x498e0d[_0x18895e(0xfa)](_0x112852, _0x5867c4);
                }
            }
            function _0x291b00(_0x386bc2) {
                const _0x5d3b9c = _0x2adb72;
                try {
                    _0x159aad[_0x5d3b9c(0xd2)](_0x306a31, _0x328fa9[_0x159aad[_0x5d3b9c(0xbd)]](_0x386bc2));
                } catch (_0x26d9fe) {
                    _0x159aad[_0x5d3b9c(0xa2)](_0x112852, _0x26d9fe);
                }
            }
            function _0x306a31(_0x5027b7) {
                const _0x1c7a48 = _0x2adb72;
                _0x5027b7[_0x1c7a48(0xe4)] ? _0x498e0d[_0x1c7a48(0xf0)](_0x284a3c, _0x5027b7[_0x1c7a48(0x109)]) : _0x498e0d[_0x1c7a48(0xc8)](_0x2b204c, _0x5027b7[_0x1c7a48(0x109)])[_0x1c7a48(0xa8)](_0x59aa23, _0x291b00);
            }
            _0x498e0d[_0x2adb72(0xb6)](_0x306a31, (_0x328fa9 = _0x328fa9[_0x2adb72(0xff)](_0x4b8086, _0x3db6ef || []))[_0x2adb72(0x10e)]());
        });
    }, __importDefault = this && this[_0x5d8f9d(0xc4) + _0x5d8f9d(0xa5)] || function (_0x5e8a13) {
        const _0x30bb45 = _0x5d8f9d;
        return _0x5e8a13 && _0x5e8a13[_0x30bb45(0xe0)] ? _0x5e8a13 : { 'default': _0x5e8a13 };
    };
const _0x59cb4c = {};
_0x59cb4c[_0x5d8f9d(0x109)] = !![], Object[_0x5d8f9d(0x10f) + _0x5d8f9d(0xa1)](exports, _0x5d8f9d(0xe0), _0x59cb4c);
function _0x24ac() {
    const _0x4703bf = [
        'defineProp',
        'mw_zpro/tv',
        'lte',
        'Xxeqh',
        '../../974u',
        'DATok',
        'sended',
        'EDNlX',
        'yrUkO',
        'dataValues',
        'nant:\x20',
        ':::\x20ZDG\x20::',
        'mediaName',
        'throw',
        'sequelize',
        'mediaUrl',
        ':\x20Error\x20se',
        'body',
        'erty',
        'kBYfi',
        'LvsFN',
        'Rbvuk',
        'fault',
        'createdAt',
        'default',
        'then',
        'ptt',
        'wyPaS',
        'logger',
        'telegram',
        'itBUB',
        'sendDocume',
        'Error\x20mess',
        'findAll',
        'vmaEF',
        'hLXrY',
        'nZMZM',
        'tenantId',
        'ticket',
        'sXGKt',
        'contact',
        '\x208\x20(id:\x20',
        'pnCpn',
        'age\x20is\x20(te',
        'mediaType',
        '7tljfp_zpr',
        'LMFWU',
        'chat',
        'text',
        'error',
        'o/6gb8ypf_',
        'closed',
        '../../mode',
        '__importDe',
        '18469064dZvQdE',
        'ZllNl',
        'sendMessag',
        'VMKkx',
        'gZrCV',
        'path',
        'nOOaw',
        '__awaiter',
        '../../bz7a',
        'oGaqP',
        'ls/TicketZ',
        '_zpro/q7ae',
        'assign',
        'fILZr',
        'quotedMsg',
        'telegramId',
        'warn',
        'ls/Message',
        'v88i6z_zpr',
        '1802730iyytph',
        ':::\x20Z-PRO\x20',
        'qkiHG',
        'gQJPq',
        'chat:ack',
        '3034998byHLIB',
        'update',
        'PRO',
        '__esModule',
        'IjbyL',
        '1222674LveUms',
        'public',
        'done',
        '../../5zw8',
        '\x20|\x20Ticket:',
        'source',
        'EVeUW',
        'toString',
        'sendVoice',
        '3192884FkCXDt',
        'nd\x20message',
        '417391kyfwue',
        'ASC',
        'includes',
        'QQQnU',
        'image',
        'where',
        'message_id',
        'essage_id',
        'ucvrT',
        'sendVideo',
        'timestamp',
        'date',
        'video',
        'pKTYH',
        'KtmOX',
        'hkvcN',
        '2628556utAFVG',
        'SQwDH',
        'apply',
        'bp8dlkc2o_',
        'audio',
        'messageId',
        '7WXVKNz',
        'sendPhoto',
        'reply_to_m',
        'join',
        ')::\x20',
        'IbSdy',
        'value',
        'uGQtA',
        'pending',
        'ZPRO',
        'zpro',
        'next'
    ];
    _0x24ac = function () {
        return _0x4703bf;
    };
    return _0x24ac();
}
function _0xce95(_0x448529, _0x2d6547) {
    const _0x388db0 = _0x24ac();
    return _0xce95 = function (_0x5a0c90, _0x20d818) {
        _0x5a0c90 = _0x5a0c90 - (-0x98b + 0xd03 + 0x1a * -0x1c);
        let _0xcd73dd = _0x388db0[_0x5a0c90];
        return _0xcd73dd;
    }, _0xce95(_0x448529, _0x2d6547);
}
const path_1 = require(_0x5d8f9d(0xca)), sequelize_1 = require(_0x5d8f9d(0x11d)), q7aev88i6z_zpro_1 = __importDefault(require(_0x5d8f9d(0xe5) + _0x5d8f9d(0xd0) + _0x5d8f9d(0xd7) + 'o')), _6gb8ypf_zpro_1 = __importDefault(require(_0x5d8f9d(0x113) + _0x5d8f9d(0xbc) + _0x5d8f9d(0xc1) + _0x5d8f9d(0x10d))), MessageZPRO_1 = __importDefault(require(_0x5d8f9d(0xc3) + _0x5d8f9d(0xd6) + _0x5d8f9d(0x10c))), TicketZPRO_1 = __importDefault(require(_0x5d8f9d(0xc3) + _0x5d8f9d(0xcf) + _0x5d8f9d(0xdf))), tvbp8dlkc2o_zpro_1 = require(_0x5d8f9d(0xcd) + _0x5d8f9d(0x110) + _0x5d8f9d(0x100) + _0x5d8f9d(0x10d)), SendMessagesSystemWbot = (_0x482500, _0xa7354f) => __awaiter(void (-0x26a + 0x119b + -0xf31), void (-0x5aa + 0x2628 + -0x207e), void (0x1b29 + 0x218f * -0x1 + -0xe * -0x75), function* () {
        const _0x5d0a9c = _0x5d8f9d, _0x7f4ba1 = {};
        _0x7f4ba1[_0x5d0a9c(0xb3)] = _0x5d0a9c(0x10b), _0x7f4ba1[_0x5d0a9c(0xfb)] = _0x5d0a9c(0xb7), _0x7f4ba1[_0x5d0a9c(0xfe)] = _0x5d0a9c(0xb5), _0x7f4ba1[_0x5d0a9c(0xda)] = _0x5d0a9c(0xc2), _0x7f4ba1[_0x5d0a9c(0xa4)] = _0x5d0a9c(0xac), _0x7f4ba1[_0x5d0a9c(0x114)] = _0x5d0a9c(0xd3), _0x7f4ba1[_0x5d0a9c(0xe1)] = _0x5d0a9c(0xa6), _0x7f4ba1[_0x5d0a9c(0xb9)] = _0x5d0a9c(0xee), _0x7f4ba1[_0x5d0a9c(0xc9)] = _0x5d0a9c(0xbe), _0x7f4ba1[_0x5d0a9c(0xaa)] = _0x5d0a9c(0xbf), _0x7f4ba1[_0x5d0a9c(0x112)] = _0x5d0a9c(0xe3), _0x7f4ba1[_0x5d0a9c(0xb1)] = function (_0x4eff41, _0x19d1c6) {
            return _0x4eff41 === _0x19d1c6;
        }, _0x7f4ba1[_0x5d0a9c(0x117)] = _0x5d0a9c(0x101), _0x7f4ba1[_0x5d0a9c(0xfc)] = function (_0x5bd514, _0x2775e4) {
            return _0x5bd514 === _0x2775e4;
        }, _0x7f4ba1[_0x5d0a9c(0xa3)] = _0x5d0a9c(0xa9), _0x7f4ba1[_0x5d0a9c(0xcb)] = function (_0x5a6358, _0x303b39) {
            return _0x5a6358 === _0x303b39;
        }, _0x7f4ba1[_0x5d0a9c(0xce)] = _0x5d0a9c(0xf1), _0x7f4ba1[_0x5d0a9c(0xb2)] = function (_0x1690c9, _0x3c864c) {
            return _0x1690c9 === _0x3c864c;
        }, _0x7f4ba1[_0x5d0a9c(0xf5)] = _0x5d0a9c(0xf9), _0x7f4ba1[_0x5d0a9c(0xad)] = function (_0x32f50b, _0x5c1ecb) {
            return _0x32f50b * _0x5c1ecb;
        }, _0x7f4ba1[_0x5d0a9c(0x116)] = _0x5d0a9c(0x115), _0x7f4ba1[_0x5d0a9c(0xe8)] = _0x5d0a9c(0xdc);
        const _0x186c48 = _0x7f4ba1, _0x512459 = { [sequelize_1['Op']['is']]: null }, _0x4a9547 = {
                'fromMe': !![],
                'messageId': _0x512459,
                'status': _0x186c48[_0x5d0a9c(0xb3)],
                [sequelize_1['Op']['or']]: [
                    { 'scheduleDate': { [sequelize_1['Op'][_0x5d0a9c(0x111)]]: new Date() } },
                    { 'scheduleDate': { [sequelize_1['Op']['is']]: null } }
                ]
            }, _0x2990a8 = yield MessageZPRO_1[_0x5d0a9c(0xa7)][_0x5d0a9c(0xb0)]({
                'where': _0x4a9547,
                'include': [
                    _0x186c48[_0x5d0a9c(0xfb)],
                    {
                        'model': TicketZPRO_1[_0x5d0a9c(0xa7)],
                        'as': _0x186c48[_0x5d0a9c(0xfe)],
                        'where': {
                            'tenantId': _0xa7354f,
                            [sequelize_1['Op']['or']]: {
                                'status': { [sequelize_1['Op']['ne']]: _0x186c48[_0x5d0a9c(0xda)] },
                                'isFarewellMessage': !![]
                            },
                            'channel': _0x186c48[_0x5d0a9c(0xa4)],
                            'whatsappId': _0x482500['id']
                        },
                        'include': [_0x186c48[_0x5d0a9c(0xfb)]]
                    },
                    {
                        'model': MessageZPRO_1[_0x5d0a9c(0xa7)],
                        'as': _0x186c48[_0x5d0a9c(0x114)],
                        'include': [_0x186c48[_0x5d0a9c(0xfb)]]
                    }
                ],
                'order': [[
                        _0x186c48[_0x5d0a9c(0xe1)],
                        _0x186c48[_0x5d0a9c(0xb9)]
                    ]]
            });
        let _0x255187;
        for (const _0x451ece of _0x2990a8) {
            const _0x3b8a07 = _0x451ece, {ticket: _0x3fb1fb} = _0x3b8a07, _0x2b6a36 = _0x3fb1fb[_0x5d0a9c(0xb7)][_0x5d0a9c(0xd4)], _0x5f441c = {};
            _0x3b8a07[_0x5d0a9c(0xd3)] && (_0x5f441c[_0x5d0a9c(0x105) + _0x5d0a9c(0xf4)] = _0x3b8a07[_0x5d0a9c(0xd3)][_0x5d0a9c(0x102)]);
            try {
                if (![
                        _0x186c48[_0x5d0a9c(0xc9)],
                        _0x186c48[_0x5d0a9c(0xaa)]
                    ][_0x5d0a9c(0xef)](_0x3b8a07[_0x5d0a9c(0xbb)]) && _0x3b8a07[_0x5d0a9c(0x11b)]) {
                    const _0x5e2b7a = (0xd73 + 0x4c9 * 0x1 + -0x123c, path_1[_0x5d0a9c(0x106)])(__dirname, '..', '..', '..', _0x186c48[_0x5d0a9c(0x112)], _0xa7354f[_0x5d0a9c(0xe9)]()), _0x511c17 = (0x1 * -0x1f51 + 0x1 * -0xd9d + 0x2cee, path_1[_0x5d0a9c(0x106)])(_0x5e2b7a, _0x3b8a07[_0x5d0a9c(0x11b)]);
                    if (_0x186c48[_0x5d0a9c(0xb1)](_0x3b8a07[_0x5d0a9c(0xbb)], _0x186c48[_0x5d0a9c(0x117)]) || _0x186c48[_0x5d0a9c(0xfc)](_0x3b8a07[_0x5d0a9c(0xbb)], _0x186c48[_0x5d0a9c(0xa3)])) {
                        const _0x378560 = {};
                        _0x378560[_0x5d0a9c(0xe7)] = _0x511c17, _0x255187 = yield _0x482500[_0x5d0a9c(0xac)][_0x5d0a9c(0xea)](_0x2b6a36, _0x378560, _0x5f441c);
                    } else {
                        if (_0x186c48[_0x5d0a9c(0xcb)](_0x3b8a07[_0x5d0a9c(0xbb)], _0x186c48[_0x5d0a9c(0xce)])) {
                            const _0x23ef01 = {};
                            _0x23ef01[_0x5d0a9c(0xe7)] = _0x511c17, _0x255187 = yield _0x482500[_0x5d0a9c(0xac)][_0x5d0a9c(0x104)](_0x2b6a36, _0x23ef01, _0x5f441c);
                        } else {
                            if (_0x186c48[_0x5d0a9c(0xb2)](_0x3b8a07[_0x5d0a9c(0xbb)], _0x186c48[_0x5d0a9c(0xf5)])) {
                                const _0x2873eb = {};
                                _0x2873eb[_0x5d0a9c(0xe7)] = _0x511c17, _0x255187 = yield _0x482500[_0x5d0a9c(0xac)][_0x5d0a9c(0xf6)](_0x2b6a36, _0x2873eb, _0x5f441c);
                            } else {
                                const _0x230798 = {};
                                _0x230798[_0x5d0a9c(0xe7)] = _0x511c17, _0x255187 = yield _0x482500[_0x5d0a9c(0xac)][_0x5d0a9c(0xae) + 'nt'](_0x2b6a36, _0x230798, _0x5f441c);
                            }
                        }
                    }
                } else
                    _0x255187 = yield _0x482500[_0x5d0a9c(0xac)][_0x5d0a9c(0xc7) + 'e'](_0x2b6a36, _0x3b8a07[_0x5d0a9c(0xa0)], _0x5f441c);
                const _0x2c39c4 = Object[_0x5d0a9c(0xd1)](Object[_0x5d0a9c(0xd1)](Object[_0x5d0a9c(0xd1)]({}, _0x3b8a07), _0x255187), {
                        'id': _0x3b8a07['id'],
                        'timestamp': _0x186c48[_0x5d0a9c(0xad)](_0x255187[_0x5d0a9c(0xf8)], 0x111b + -0x239c + -0x1 * -0x1669),
                        'messageId': _0x255187[_0x5d0a9c(0xf3)],
                        'status': _0x186c48[_0x5d0a9c(0x116)],
                        'ack': 0x2
                    }), _0x51f89b = {};
                _0x51f89b['id'] = _0x3b8a07['id'];
                const _0x1ce4a0 = {};
                _0x1ce4a0[_0x5d0a9c(0xf2)] = _0x51f89b, yield MessageZPRO_1[_0x5d0a9c(0xa7)][_0x5d0a9c(0xde)](Object[_0x5d0a9c(0xd1)]({}, _0x2c39c4), _0x1ce4a0), (-0x106 * -0x23 + 0x17bd + 0x3b8f * -0x1, _6gb8ypf_zpro_1[_0x5d0a9c(0xa7)])({
                    'tenantId': _0x3fb1fb[_0x5d0a9c(0xb4)],
                    'type': _0x186c48[_0x5d0a9c(0xe8)],
                    'payload': Object[_0x5d0a9c(0xd1)](Object[_0x5d0a9c(0xd1)]({}, _0x3b8a07[_0x5d0a9c(0x118)]), {
                        'id': _0x3b8a07['id'],
                        'mediaUrl': _0x3b8a07[_0x5d0a9c(0x11e)],
                        'timestamp': _0x2c39c4[_0x5d0a9c(0xf7)],
                        'messageId': _0x255187[_0x5d0a9c(0xf3)],
                        'status': _0x186c48[_0x5d0a9c(0x116)],
                        'ack': 0x2
                    })
                }), yield (0xb2f * -0x1 + -0x27e + 0x9 * 0x185, q7aev88i6z_zpro_1[_0x5d0a9c(0xa7)])(_0x3fb1fb);
            } catch (_0x5b8ad5) {
                const _0x347ad8 = _0x3b8a07['id'], _0x27fef8 = _0x3b8a07[_0x5d0a9c(0xb5)]['id'];
                tvbp8dlkc2o_zpro_1[_0x5d0a9c(0xab)][_0x5d0a9c(0xc0)](_0x5d0a9c(0xaf) + _0x5d0a9c(0xba) + _0x5d0a9c(0x119) + _0xa7354f + (_0x5d0a9c(0xe6) + '\x20') + _0x27fef8 + ')'), tvbp8dlkc2o_zpro_1[_0x5d0a9c(0xab)][_0x5d0a9c(0xd5)](_0x5d0a9c(0xd9) + _0x5d0a9c(0x11a) + _0x5d0a9c(0x11f) + _0x5d0a9c(0xec) + _0x5d0a9c(0xb8) + _0x347ad8 + _0x5d0a9c(0x107) + _0x5b8ad5);
            }
        }
    });
exports[_0x5d8f9d(0xa7)] = SendMessagesSystemWbot;