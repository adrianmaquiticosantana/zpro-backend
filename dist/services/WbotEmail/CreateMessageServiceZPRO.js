'use strict';
const _0x8f1705 = _0x5c9a;
function _0x5296() {
    const _0x1a426b = [
        'iXNBH',
        'create',
        'ls/Message',
        'ack',
        '__awaiter',
        'image',
        'bp8dlkc2o_',
        'quotedMsg',
        'read',
        '9490KrbADf',
        'error',
        'sts',
        'PRO',
        'TniHm',
        'next',
        'ls/TicketZ',
        'ticket',
        'tenantId',
        'name',
        'fromMe',
        'RzQfP',
        'joFua',
        'toString',
        'YfTNL',
        'EiBTD',
        'ERR_CREATI',
        'body',
        'RNtul',
        ':::\x20ZDG\x20::',
        'ls/UserZPR',
        'photo',
        '298vkBpLU',
        'dZDAM',
        'essage\x20exi',
        ':\x20Creating',
        ':\x20e8',
        '../../mode',
        'ZPRO',
        'UghGn',
        'NG_MESSAGE',
        'contactId',
        '__importDe',
        'eWdgG',
        'fcpwS',
        '12iYjJoU',
        'uuid',
        'nJfri',
        '632126LLnpqT',
        'then',
        'idFront',
        'info',
        '1077328FgrHdA',
        'yjIZm',
        'done',
        '\x20webmail\x20m',
        'essage\x20',
        'jytSI',
        'payload',
        'kencN',
        'update',
        'userId',
        'RccmO',
        '492mREsKS',
        'mw_zpro/tv',
        'contact',
        'model',
        '../../bz7a',
        '7tljfp_zpr',
        '_SYSTEM\x202',
        'BJyLG',
        'chat:creat',
        'throw',
        'channel',
        'status',
        'yQfaa',
        'zpro',
        'yYKQT',
        'jhxAb',
        '3249lcALlg',
        'mediaType',
        'ticketId',
        'defineProp',
        'where',
        'erty',
        'sended',
        'QiCXK',
        'warn',
        'findByPk',
        'user',
        '550Dtbkiz',
        '1925MtxnaI',
        'value',
        'logger',
        'subject',
        'mediaUrl',
        '2462957ccYtHI',
        'default',
        'timestamp',
        'WCvuz',
        'messageId',
        'scheduleDa',
        'log',
        '1608ZgyCbJ',
        '../../974u',
        '2076DssTlM',
        'o/6gb8ypf_',
        'type',
        'ls/Contact',
        'vpbiG',
        'QEwQl',
        'apply',
        'length',
        'CisKv',
        'yOTUF',
        '__esModule',
        'emailId',
        'fault',
        ':::\x20Z-PRO\x20',
        'qIRJo',
        'vESUU',
        'include',
        'getTime',
        'findOne'
    ];
    _0x5296 = function () {
        return _0x1a426b;
    };
    return _0x5296();
}
function _0x5c9a(_0x308272, _0x4828d7) {
    const _0x54ed11 = _0x5296();
    return _0x5c9a = function (_0x3b1c2a, _0x4fb593) {
        _0x3b1c2a = _0x3b1c2a - (0x5ce * 0x1 + -0x525 * 0x1 + -0x1 * -0xf1);
        let _0x4448e2 = _0x54ed11[_0x3b1c2a];
        return _0x4448e2;
    }, _0x5c9a(_0x308272, _0x4828d7);
}
(function (_0x572de8, _0x5623e9) {
    const _0x1d8744 = _0x5c9a, _0x499386 = _0x572de8();
    while (!![]) {
        try {
            const _0x462ffa = -parseInt(_0x1d8744(0x1ea)) / (0xd25 + -0x54d * -0x2 + -0x17be) * (-parseInt(_0x1d8744(0x1af)) / (-0xd4b + -0x1 * 0x17ff + 0x254c)) + parseInt(_0x1d8744(0x1f6)) / (-0x8 * -0x4cf + 0x1 * 0x10fd + -0x3772) * (parseInt(_0x1d8744(0x1ce)) / (-0x3 * 0x827 + -0x1429 + 0x1651 * 0x2)) + parseInt(_0x1d8744(0x1e9)) / (-0x5d0 + 0x22a7 + -0x1cd2) * (parseInt(_0x1d8744(0x1f8)) / (0xd26 + 0x2283 + 0x5 * -0x987)) + parseInt(_0x1d8744(0x1ef)) / (-0xab5 + -0xd2f + 0x7f9 * 0x3) + -parseInt(_0x1d8744(0x1c3)) / (-0x13 * -0x20b + 0xed * -0x11 + -0x170c) + -parseInt(_0x1d8744(0x1de)) / (-0x1af7 + 0x1371 + -0xd7 * -0x9) * (parseInt(_0x1d8744(0x214)) / (0x1 * -0x1637 + -0xf49 + -0x1 * -0x258a)) + -parseInt(_0x1d8744(0x1bf)) / (-0x1860 + 0x1d17 + -0x4ac) * (parseInt(_0x1d8744(0x1bc)) / (-0x10bb + 0x1ef7 * 0x1 + -0xe30));
            if (_0x462ffa === _0x5623e9)
                break;
            else
                _0x499386['push'](_0x499386['shift']());
        } catch (_0x2f795d) {
            _0x499386['push'](_0x499386['shift']());
        }
    }
}(_0x5296, -0x3 * -0x2203 + -0x1 * -0x1f139 + 0xd505));
var __awaiter = this && this[_0x8f1705(0x20f)] || function (_0x170723, _0x53e49d, _0x57ca62, _0x13c09a) {
        const _0x1b1fc6 = _0x8f1705, _0x206188 = {
                'yOTUF': function (_0x1d5a74, _0x4a2829) {
                    return _0x1d5a74(_0x4a2829);
                },
                'jytSI': function (_0x5edf0e, _0x5980dd) {
                    return _0x5edf0e instanceof _0x5980dd;
                },
                'WCvuz': function (_0x186f54, _0x4292cc) {
                    return _0x186f54(_0x4292cc);
                },
                'eWdgG': _0x1b1fc6(0x1d7),
                'BJyLG': function (_0x1d6608, _0x583b3b) {
                    return _0x1d6608(_0x583b3b);
                }
            };
        function _0x1d4bdb(_0x27fa70) {
            const _0x9bfce8 = _0x1b1fc6;
            return _0x206188[_0x9bfce8(0x1c8)](_0x27fa70, _0x57ca62) ? _0x27fa70 : new _0x57ca62(function (_0x43747b) {
                const _0x1e763c = _0x9bfce8;
                _0x206188[_0x1e763c(0x201)](_0x43747b, _0x27fa70);
            });
        }
        return new (_0x57ca62 || (_0x57ca62 = Promise))(function (_0x409f35, _0x4db853) {
            const _0x3d6a3a = _0x1b1fc6, _0x5a071c = {
                    'UghGn': function (_0x2696db, _0x11a488) {
                        const _0x30fda5 = _0x5c9a;
                        return _0x206188[_0x30fda5(0x1f2)](_0x2696db, _0x11a488);
                    },
                    'kencN': function (_0x3092aa, _0x3cccf4) {
                        const _0x926bc6 = _0x5c9a;
                        return _0x206188[_0x926bc6(0x201)](_0x3092aa, _0x3cccf4);
                    },
                    'vESUU': _0x206188[_0x3d6a3a(0x1ba)],
                    'vpbiG': function (_0x4e9afa, _0x2a00f9) {
                        const _0xd0703c = _0x3d6a3a;
                        return _0x206188[_0xd0703c(0x201)](_0x4e9afa, _0x2a00f9);
                    },
                    'yjIZm': function (_0xc69199, _0x176ec9) {
                        const _0x4ca807 = _0x3d6a3a;
                        return _0x206188[_0x4ca807(0x1d5)](_0xc69199, _0x176ec9);
                    }
                };
            function _0xf9074d(_0x3fdec5) {
                const _0x580341 = _0x3d6a3a;
                try {
                    _0x5a071c[_0x580341(0x1b6)](_0x2eab04, _0x13c09a[_0x580341(0x19e)](_0x3fdec5));
                } catch (_0x516f92) {
                    _0x5a071c[_0x580341(0x1ca)](_0x4db853, _0x516f92);
                }
            }
            function _0x2622fd(_0x323d6e) {
                const _0x380f96 = _0x3d6a3a;
                try {
                    _0x5a071c[_0x380f96(0x1ca)](_0x2eab04, _0x13c09a[_0x5a071c[_0x380f96(0x207)]](_0x323d6e));
                } catch (_0x4baf75) {
                    _0x5a071c[_0x380f96(0x1ca)](_0x4db853, _0x4baf75);
                }
            }
            function _0x2eab04(_0x4f7c7e) {
                const _0x200227 = _0x3d6a3a;
                _0x4f7c7e[_0x200227(0x1c5)] ? _0x5a071c[_0x200227(0x1fc)](_0x409f35, _0x4f7c7e[_0x200227(0x1eb)]) : _0x5a071c[_0x200227(0x1c4)](_0x1d4bdb, _0x4f7c7e[_0x200227(0x1eb)])[_0x200227(0x1c0)](_0xf9074d, _0x2622fd);
            }
            _0x206188[_0x3d6a3a(0x201)](_0x2eab04, (_0x13c09a = _0x13c09a[_0x3d6a3a(0x1fe)](_0x170723, _0x53e49d || []))[_0x3d6a3a(0x19e)]());
        });
    }, __importDefault = this && this[_0x8f1705(0x1b9) + _0x8f1705(0x204)] || function (_0x268881) {
        const _0x5bb617 = _0x8f1705;
        return _0x268881 && _0x268881[_0x5bb617(0x202)] ? _0x268881 : { 'default': _0x268881 };
    };
const _0x54ab2c = {};
_0x54ab2c[_0x8f1705(0x1eb)] = !![], Object[_0x8f1705(0x1e1) + _0x8f1705(0x1e3)](exports, _0x8f1705(0x202), _0x54ab2c);
const MessageZPRO_1 = __importDefault(require(_0x8f1705(0x1b4) + _0x8f1705(0x20d) + _0x8f1705(0x1b5))), tvbp8dlkc2o_zpro_1 = require(_0x8f1705(0x1d2) + _0x8f1705(0x1cf) + _0x8f1705(0x211) + _0x8f1705(0x1db)), _6gb8ypf_zpro_1 = __importDefault(require(_0x8f1705(0x1f7) + _0x8f1705(0x1d3) + _0x8f1705(0x1f9) + _0x8f1705(0x1db))), uuid_1 = require(_0x8f1705(0x1bd)), TicketZPRO_1 = __importDefault(require(_0x8f1705(0x1b4) + _0x8f1705(0x19f) + _0x8f1705(0x19c))), UserZPRO_1 = __importDefault(require(_0x8f1705(0x1b4) + _0x8f1705(0x1ad) + 'O')), ContactZPRO_1 = __importDefault(require(_0x8f1705(0x1b4) + _0x8f1705(0x1fb) + _0x8f1705(0x1b5))), CreateMessageService = _0x24fb64 => __awaiter(void (0xe * -0x2ba + -0x5d3 + 0x2bff), void (0x1 * 0x1f6c + -0x3 * 0x8ac + -0x8 * 0xad), void (-0x2030 + -0x2f1 + -0x17 * -0x187), function* () {
        const _0x41ea57 = _0x8f1705, _0x3bbb7f = {};
        _0x3bbb7f[_0x41ea57(0x1dc)] = _0x41ea57(0x205) + _0x41ea57(0x1ac) + _0x41ea57(0x1b2) + _0x41ea57(0x1c6) + _0x41ea57(0x1c7), _0x3bbb7f[_0x41ea57(0x1ab)] = _0x41ea57(0x205) + _0x41ea57(0x1ac) + _0x41ea57(0x1b2) + _0x41ea57(0x1c6) + _0x41ea57(0x1b1) + _0x41ea57(0x19b), _0x3bbb7f[_0x41ea57(0x1e5)] = function (_0x5b3b75, _0x30af17) {
            return _0x5b3b75 === _0x30af17;
        }, _0x3bbb7f[_0x41ea57(0x1dd)] = function (_0x56745c, _0x560502) {
            return _0x56745c === _0x560502;
        }, _0x3bbb7f[_0x41ea57(0x1a4)] = _0x41ea57(0x1e4), _0x3bbb7f[_0x41ea57(0x206)] = _0x41ea57(0x1ae), _0x3bbb7f[_0x41ea57(0x1b0)] = _0x41ea57(0x210), _0x3bbb7f[_0x41ea57(0x1fd)] = _0x41ea57(0x1a0), _0x3bbb7f[_0x41ea57(0x1bb)] = _0x41ea57(0x1d0), _0x3bbb7f[_0x41ea57(0x1a7)] = _0x41ea57(0x212), _0x3bbb7f[_0x41ea57(0x1da)] = _0x41ea57(0x1e8), _0x3bbb7f[_0x41ea57(0x1a5)] = _0x41ea57(0x1a2), _0x3bbb7f[_0x41ea57(0x1be)] = function (_0x5291f0, _0x274e09) {
            return _0x5291f0 >= _0x274e09;
        }, _0x3bbb7f[_0x41ea57(0x200)] = _0x41ea57(0x19a), _0x3bbb7f[_0x41ea57(0x19d)] = _0x41ea57(0x1a9) + _0x41ea57(0x1b7) + _0x41ea57(0x1d4), _0x3bbb7f[_0x41ea57(0x20b)] = _0x41ea57(0x1d6) + 'e', _0x3bbb7f[_0x41ea57(0x1a8)] = function (_0x173183, _0x38f0d1) {
            return _0x173183 + _0x38f0d1;
        }, _0x3bbb7f[_0x41ea57(0x1cd)] = _0x41ea57(0x205) + _0x41ea57(0x1ac) + _0x41ea57(0x1b3);
        const _0x5ee73d = _0x3bbb7f;
        var _0x4db522, _0x5b4583;
        tvbp8dlkc2o_zpro_1[_0x41ea57(0x1ec)][_0x41ea57(0x1c2)](_0x5ee73d[_0x41ea57(0x1dc)]);
        const _0x1442cb = {};
        _0x1442cb[_0x41ea57(0x1f3)] = _0x24fb64['id'], _0x1442cb[_0x41ea57(0x1a1)] = _0x24fb64[_0x41ea57(0x1a1)];
        const _0x45ccbd = {};
        _0x45ccbd[_0x41ea57(0x1e2)] = _0x1442cb;
        const _0x42648c = yield MessageZPRO_1[_0x41ea57(0x1f0)][_0x41ea57(0x20a)](_0x45ccbd);
        if (_0x42648c) {
            tvbp8dlkc2o_zpro_1[_0x41ea57(0x1ec)][_0x41ea57(0x1c2)](_0x5ee73d[_0x41ea57(0x1ab)]);
            return;
        }
        const {
            id: _0x271a2b,
            contactId: _0x4cff33,
            body: _0x2e5566,
            ticketId: _0x351fed,
            fromMe: _0x3c59b0,
            tenantId: _0xe16ae,
            fileName: _0x11b4a1,
            mediaType: _0x5db62b,
            originalName: _0x5b703e,
            scheduleDate: _0x2b25c1,
            ack: _0x170f96,
            userId: _0x25c840
        } = _0x24fb64;
        if ((!_0x2e5566 || _0x5ee73d[_0x41ea57(0x1e5)](_0x2e5566, '')) && (!_0x11b4a1 || _0x5ee73d[_0x41ea57(0x1dd)](_0x11b4a1, '')))
            return;
        const _0x25b6c6 = (-0x4d5 * 0x8 + -0x11 + 0x1af * 0x17, uuid_1['v4'])(), _0x256ee1 = {};
        _0x256ee1[_0x41ea57(0x1b8)] = _0x4cff33, _0x256ee1[_0x41ea57(0x1aa)] = _0x2e5566, _0x256ee1[_0x41ea57(0x1e0)] = _0x351fed, _0x256ee1[_0x41ea57(0x1a3)] = _0x3c59b0, _0x256ee1[_0x41ea57(0x1a1)] = _0xe16ae, _0x256ee1[_0x41ea57(0x1f3)] = _0x271a2b, _0x256ee1[_0x41ea57(0x20e)] = 0x2, _0x256ee1[_0x41ea57(0x1d9)] = _0x5ee73d[_0x41ea57(0x1a4)], _0x256ee1[_0x41ea57(0x1c1)] = _0x25b6c6, _0x256ee1[_0x41ea57(0x213)] = ![], _0x256ee1[_0x41ea57(0x1f4) + 'te'] = _0x2b25c1, _0x256ee1[_0x41ea57(0x1cc)] = _0x25c840;
        const _0x531455 = _0x256ee1;
        _0x24fb64[_0x41ea57(0x1ed)] && (_0x531455[_0x41ea57(0x1ed)] = _0x24fb64[_0x41ea57(0x1ed)]);
        _0x24fb64[_0x41ea57(0x203)] && (_0x531455[_0x41ea57(0x203)] = _0x24fb64[_0x41ea57(0x203)]);
        _0x24fb64[_0x41ea57(0x1d8)] && (_0x531455[_0x41ea57(0x1d8)] = _0x24fb64[_0x41ea57(0x1d8)]);
        _0x11b4a1 && (_0x531455[_0x41ea57(0x1ee)] = _0x11b4a1, _0x531455[_0x41ea57(0x1df)] = _0x5ee73d[_0x41ea57(0x1dd)](_0x5db62b, _0x5ee73d[_0x41ea57(0x206)]) ? _0x5ee73d[_0x41ea57(0x1b0)] : _0x5db62b);
        try {
            const _0x15af57 = yield MessageZPRO_1[_0x41ea57(0x1f0)][_0x41ea57(0x20c)](_0x531455), _0x506ad5 = {};
            _0x506ad5[_0x41ea57(0x1a1)] = _0xe16ae;
            const _0x1558e5 = {};
            _0x1558e5[_0x41ea57(0x1d1)] = TicketZPRO_1[_0x41ea57(0x1f0)], _0x1558e5['as'] = _0x5ee73d[_0x41ea57(0x1fd)], _0x1558e5[_0x41ea57(0x1e2)] = _0x506ad5, _0x1558e5[_0x41ea57(0x208)] = [_0x5ee73d[_0x41ea57(0x1bb)]];
            const _0x3021fb = yield MessageZPRO_1[_0x41ea57(0x1f0)][_0x41ea57(0x1e7)](_0x15af57['id'], {
                'include': [
                    _0x1558e5,
                    {
                        'model': MessageZPRO_1[_0x41ea57(0x1f0)],
                        'as': _0x5ee73d[_0x41ea57(0x1a7)],
                        'include': [_0x5ee73d[_0x41ea57(0x1bb)]]
                    },
                    {
                        'model': UserZPRO_1[_0x41ea57(0x1f0)],
                        'as': _0x5ee73d[_0x41ea57(0x1da)],
                        'attributes': [
                            'id',
                            _0x5ee73d[_0x41ea57(0x1a5)]
                        ]
                    },
                    {
                        'model': ContactZPRO_1[_0x41ea57(0x1f0)],
                        'as': _0x5ee73d[_0x41ea57(0x1bb)],
                        'attributes': [
                            'id',
                            _0x5ee73d[_0x41ea57(0x1a5)]
                        ]
                    }
                ]
            });
            if (_0x3021fb)
                try {
                    yield _0x3021fb[_0x41ea57(0x1a0)][_0x41ea57(0x1cb)]({
                        'lastMessageAt': _0x5ee73d[_0x41ea57(0x1be)](_0x5ee73d[_0x41ea57(0x1dd)](_0x4db522 = _0x3021fb[_0x41ea57(0x1f1)], null) || _0x5ee73d[_0x41ea57(0x1dd)](_0x4db522, void (-0xccc + 0x255 * 0x4 + 0x378 * 0x1)) ? void (0x181b * -0x1 + 0x7 * -0x301 + 0x2d22) : _0x4db522[_0x41ea57(0x1a6)]()[_0x41ea57(0x1ff)], -0x1537 * -0x1 + 0x284 * 0xd + -0x563 * 0xa) ? _0x3021fb[_0x41ea57(0x1f1)] : new Date()[_0x41ea57(0x209)](),
                        'lastMessageReceived': _0x3021fb[_0x41ea57(0x1a3)] ? null : new Date()[_0x41ea57(0x209)]()
                    });
                } catch (_0x1b5414) {
                    console[_0x41ea57(0x1f5)](_0x5ee73d[_0x41ea57(0x200)], _0x1b5414);
                }
            if (!_0x3021fb)
                throw new Error(_0x5ee73d[_0x41ea57(0x19d)]);
            _0x3021fb[_0x41ea57(0x1a3)] && (yield TicketZPRO_1[_0x41ea57(0x1f0)][_0x41ea57(0x1cb)]({ 'lastMessageReceived': _0x5ee73d[_0x41ea57(0x1be)](_0x5ee73d[_0x41ea57(0x1dd)](_0x5b4583 = _0x3021fb[_0x41ea57(0x1f1)], null) || _0x5ee73d[_0x41ea57(0x1e5)](_0x5b4583, void (0xfa0 * -0x2 + 0x1 * 0x244f + -0x50f)) ? void (0x3 * -0xad1 + 0x862 + -0x1811 * -0x1) : _0x5b4583[_0x41ea57(0x1a6)]()[_0x41ea57(0x1ff)], 0xbd + 0x6c4 * -0x4 + -0x10 * -0x1a6) ? _0x3021fb[_0x41ea57(0x1f1)] : new Date()[_0x41ea57(0x209)]() }, { 'where': { 'id': _0x3021fb[_0x41ea57(0x1e0)] } }));
            const _0x9164a6 = {};
            return _0x9164a6[_0x41ea57(0x1a1)] = _0xe16ae, _0x9164a6[_0x41ea57(0x1fa)] = _0x5ee73d[_0x41ea57(0x20b)], _0x9164a6[_0x41ea57(0x1c9)] = _0x3021fb, (0x1c * 0x6d + -0xc79 + 0x3 * 0x2f, _6gb8ypf_zpro_1[_0x41ea57(0x1f0)])(_0x9164a6), _0x15af57;
        } catch (_0x35908a) {
            tvbp8dlkc2o_zpro_1[_0x41ea57(0x1ec)][_0x41ea57(0x1e6)](_0x5ee73d[_0x41ea57(0x1a8)](_0x5ee73d[_0x41ea57(0x1cd)], _0x35908a));
        }
    });
exports[_0x8f1705(0x1f0)] = CreateMessageService;