'use strict';
const _0x1297aa = _0x5621;
function _0x5621(_0x5187ec, _0x422d71) {
    const _0x1d4549 = _0x5937();
    return _0x5621 = function (_0x3e0399, _0xb25b87) {
        _0x3e0399 = _0x3e0399 - (0x1201 * -0x2 + -0x2500 + 0x4a73);
        let _0x2cdc89 = _0x1d4549[_0x3e0399];
        return _0x2cdc89;
    }, _0x5621(_0x5187ec, _0x422d71);
}
(function (_0x2e4b8a, _0x19dc60) {
    const _0x4ff7fa = _0x5621, _0x3cc2e4 = _0x2e4b8a();
    while (!![]) {
        try {
            const _0x178d18 = parseInt(_0x4ff7fa(0x19f)) / (-0x14 * 0x16f + 0x1f8a * 0x1 + -0x2dd) * (-parseInt(_0x4ff7fa(0x199)) / (0x1cd3 + -0xd31 + 0x7d * -0x20)) + parseInt(_0x4ff7fa(0x201)) / (0x1 * 0x113b + -0x22e8 + 0x11b * 0x10) + -parseInt(_0x4ff7fa(0x18f)) / (-0xa4 * -0x9 + -0xc * -0x321 + -0x2b4c) * (-parseInt(_0x4ff7fa(0x1a6)) / (-0xc91 + -0x1ca5 * 0x1 + 0x293b)) + parseInt(_0x4ff7fa(0x1af)) / (-0x3f4 + -0xc75 + 0x106f) * (parseInt(_0x4ff7fa(0x1b9)) / (0xa34 + -0xe1d * -0x1 + -0x184a)) + parseInt(_0x4ff7fa(0x1ee)) / (0x3b9 + -0xffa + -0xc49 * -0x1) * (parseInt(_0x4ff7fa(0x193)) / (-0x5 * 0x3c3 + 0x23 * -0x5 + 0x1387)) + parseInt(_0x4ff7fa(0x1f2)) / (-0x8b4 + 0x2bd * -0xb + 0x26dd) + parseInt(_0x4ff7fa(0x1ab)) / (-0x24b6 + 0x21d4 + -0x6b * -0x7) * (-parseInt(_0x4ff7fa(0x1c9)) / (-0x2db + -0x1bb * 0x5 + 0xb8e));
            if (_0x178d18 === _0x19dc60)
                break;
            else
                _0x3cc2e4['push'](_0x3cc2e4['shift']());
        } catch (_0x2f6190) {
            _0x3cc2e4['push'](_0x3cc2e4['shift']());
        }
    }
}(_0x5937, 0x77546 + 0x32cef + 0xb * -0x23c7));
function _0x5937() {
    const _0x2ef51a = [
        'toFormat',
        'peg',
        'message',
        'BWgDF',
        ':\x20CreateMe',
        'RSeXP',
        'fromMe',
        'lastIndexO',
        'info',
        'timestamp',
        'KFRDG',
        'update',
        'zihWt',
        'mpeg',
        'neService',
        'error',
        '../../yshu',
        'map',
        'NG_MESSAGE',
        'create',
        '\x20Error:\x20',
        'dirname',
        'ls/Message',
        '17168xvOemd',
        'ELcZw',
        'FOVLH',
        'fpq90v_zpr',
        '140850AMTXBT',
        'OoaMH',
        'util',
        'fluent-ffm',
        'zIBAe',
        'createWrit',
        'PAwjM',
        'writeFile',
        'OffLineZPR',
        'quotedMsg',
        'assign',
        'vTQRK',
        '.ogg',
        'userId',
        'fault',
        '3372186GDIECL',
        ':::\x20ZDG\x20::',
        ':::\x20Z-PRO\x20',
        'path',
        'GYLdh',
        'findByPk',
        'inputForma',
        '@ffmpeg-in',
        'uuid',
        'split',
        'TYFTn',
        'EGxqi',
        'value',
        'ZPRO',
        '-appMessag',
        'CUWUr',
        'kHiDX',
        'buffer',
        'ticket',
        'uQkkv',
        'fDGuk',
        'contactId',
        'basename',
        'erty',
        '1_zpro/d4a',
        'toString',
        'ls/TicketZ',
        'wSmfq',
        '-notificat',
        'bp8dlkc2o_',
        'substring',
        'substr',
        'extname',
        'default',
        'then',
        'ssageOffLi',
        'mYbVn',
        'end',
        '152xOyYKI',
        ':\x20Encoding',
        'read',
        'getIO',
        '945pBAxko',
        'status',
        'lIrPm',
        'zpro',
        'chat',
        'done',
        '8wWofsd',
        'tenantId',
        '__awaiter',
        'mediaType',
        'logger',
        'AcbBT',
        '255551mwcnwT',
        'ion',
        'base64',
        '.mp3',
        'mvVcV',
        'staller/ff',
        'setFfmpegP',
        '67935FDULpZ',
        'okmTa',
        'ticketId',
        'wId',
        'eStream',
        '5533rlqsdV',
        'all',
        '__importDe',
        'next',
        '42LWEJVg',
        'kUUuM',
        'join',
        'mp3',
        'PRO',
        'include',
        'ath',
        'public',
        'XhtpT',
        'emit',
        '622328OlWnbz',
        'oFror',
        'GJPBy',
        'replace',
        'indexOf',
        'filename',
        '../../bz7a',
        'ERR_CREATI',
        'zcIQs',
        'defineProp',
        'pipe',
        'getTime',
        'pIagO',
        'throw',
        'apply',
        'DMaec',
        '21084wKOklp',
        'mw_zpro/tv',
        '__esModule',
        'vdQzL',
        'mimetype',
        '../../mode',
        'ogg',
        'promisify',
        'mediaUrl',
        'contact',
        'Jpgue',
        'body',
        'yAzvz',
        'PhPfq'
    ];
    _0x5937 = function () {
        return _0x2ef51a;
    };
    return _0x5937();
}
var __awaiter = this && this[_0x1297aa(0x19b)] || function (_0x27abae, _0x23cd96, _0x2f0575, _0x4bc10d) {
        const _0xa5d343 = _0x1297aa, _0x29426d = {
                'zcIQs': function (_0x218fab, _0x39de93) {
                    return _0x218fab(_0x39de93);
                },
                'Jpgue': function (_0x342953, _0x17d55c) {
                    return _0x342953 instanceof _0x17d55c;
                },
                'zIBAe': function (_0x364b1b, _0x5e786e) {
                    return _0x364b1b(_0x5e786e);
                },
                'RSeXP': function (_0x58936b, _0x54b8b0) {
                    return _0x58936b(_0x54b8b0);
                },
                'XhtpT': _0xa5d343(0x1c6),
                'oFror': function (_0x1bb889, _0x5369ba) {
                    return _0x1bb889(_0x5369ba);
                }
            };
        function _0x4d4d93(_0x4a9125) {
            const _0x2c795a = _0xa5d343, _0x4ac90c = {
                    'mYbVn': function (_0x11898b, _0xa12e36) {
                        const _0x1b5ab5 = _0x5621;
                        return _0x29426d[_0x1b5ab5(0x1c1)](_0x11898b, _0xa12e36);
                    }
                };
            return _0x29426d[_0x2c795a(0x1d3)](_0x4a9125, _0x2f0575) ? _0x4a9125 : new _0x2f0575(function (_0x39f1de) {
                const _0x215814 = _0x2c795a;
                _0x4ac90c[_0x215814(0x18d)](_0x39f1de, _0x4a9125);
            });
        }
        return new (_0x2f0575 || (_0x2f0575 = Promise))(function (_0x315d58, _0x491e59) {
            const _0x263b78 = _0xa5d343, _0x345367 = {
                    'kHiDX': function (_0x5a5350, _0x3b6dba) {
                        const _0xfba4b8 = _0x5621;
                        return _0x29426d[_0xfba4b8(0x1dc)](_0x5a5350, _0x3b6dba);
                    },
                    'DMaec': _0x29426d[_0x263b78(0x1b7)],
                    'KFRDG': function (_0x3be63e, _0x5d897c) {
                        const _0x104f56 = _0x263b78;
                        return _0x29426d[_0x104f56(0x1f6)](_0x3be63e, _0x5d897c);
                    },
                    'OoaMH': function (_0x553db5, _0x1fd4ce) {
                        const _0xee7e52 = _0x263b78;
                        return _0x29426d[_0xee7e52(0x1ba)](_0x553db5, _0x1fd4ce);
                    }
                };
            function _0x242289(_0x10a110) {
                const _0x4ff036 = _0x263b78;
                try {
                    _0x29426d[_0x4ff036(0x1f6)](_0x4fea86, _0x4bc10d[_0x4ff036(0x1ae)](_0x10a110));
                } catch (_0x96c32d) {
                    _0x29426d[_0x4ff036(0x1dc)](_0x491e59, _0x96c32d);
                }
            }
            function _0x474d34(_0x194cef) {
                const _0x1e6621 = _0x263b78;
                try {
                    _0x345367[_0x1e6621(0x179)](_0x4fea86, _0x4bc10d[_0x345367[_0x1e6621(0x1c8)]](_0x194cef));
                } catch (_0x1961c6) {
                    _0x345367[_0x1e6621(0x1e1)](_0x491e59, _0x1961c6);
                }
            }
            function _0x4fea86(_0x226142) {
                const _0x267256 = _0x263b78;
                _0x226142[_0x267256(0x198)] ? _0x345367[_0x267256(0x179)](_0x315d58, _0x226142[_0x267256(0x175)]) : _0x345367[_0x267256(0x1f3)](_0x4d4d93, _0x226142[_0x267256(0x175)])[_0x267256(0x18b)](_0x242289, _0x474d34);
            }
            _0x29426d[_0x263b78(0x1dc)](_0x4fea86, (_0x4bc10d = _0x4bc10d[_0x263b78(0x1c7)](_0x27abae, _0x23cd96 || []))[_0x263b78(0x1ae)]());
        });
    }, __importDefault = this && this[_0x1297aa(0x1ad) + _0x1297aa(0x200)] || function (_0x101223) {
        const _0x182438 = _0x1297aa;
        return _0x101223 && _0x101223[_0x182438(0x1cb)] ? _0x101223 : { 'default': _0x101223 };
    };
const _0x4800ac = {};
_0x4800ac[_0x1297aa(0x175)] = !![], Object[_0x1297aa(0x1c2) + _0x1297aa(0x180)](exports, _0x1297aa(0x1cb), _0x4800ac);
const fs_1 = require('fs'), util_1 = require(_0x1297aa(0x1f4)), path_1 = require(_0x1297aa(0x204)), tvbp8dlkc2o_zpro_1 = require(_0x1297aa(0x1bf) + _0x1297aa(0x1ca) + _0x1297aa(0x186) + _0x1297aa(0x196)), MessageOffLineZPRO_1 = __importDefault(require(_0x1297aa(0x1ce) + _0x1297aa(0x1ed) + _0x1297aa(0x1fa) + 'O')), d4afpq90v_zpro_1 = require(_0x1297aa(0x1e7) + _0x1297aa(0x181) + _0x1297aa(0x1f1) + 'o'), TicketZPRO_1 = __importDefault(require(_0x1297aa(0x1ce) + _0x1297aa(0x183) + _0x1297aa(0x1b3))), MessageZPRO_1 = __importDefault(require(_0x1297aa(0x1ce) + _0x1297aa(0x1ed) + _0x1297aa(0x176))), fluent_ffmpeg_1 = __importDefault(require(_0x1297aa(0x1f5) + _0x1297aa(0x1d8))), ffmpeg_1 = require(_0x1297aa(0x208) + _0x1297aa(0x1a4) + _0x1297aa(0x1e4)), fs_2 = __importDefault(require('fs')), path_2 = __importDefault(require(_0x1297aa(0x204))), uuid_1 = require(_0x1297aa(0x171)), writeFileAsync = (0x13f * 0x11 + -0x1ff3 + 0xac4, util_1[_0x1297aa(0x1d0)])(fs_1[_0x1297aa(0x1f9)]), convertOggToMp3 = (_0x620cf0, _0x59fb2a) => {
        const _0x5e8bca = _0x1297aa, _0x32466e = {
                'kUUuM': function (_0x1a604f, _0x2295d3) {
                    return _0x1a604f(_0x2295d3);
                },
                'zihWt': function (_0x55c5a4) {
                    return _0x55c5a4();
                },
                'PAwjM': _0x5e8bca(0x1cf),
                'lIrPm': _0x5e8bca(0x1b2),
                'yAzvz': _0x5e8bca(0x1e6),
                'okmTa': _0x5e8bca(0x18e)
            };
        return new Promise((_0x1d2e97, _0xb5334) => {
            const _0x51edb9 = _0x5e8bca, _0x6ff95 = {
                    'wSmfq': function (_0x5015e2, _0x33c1ba) {
                        const _0x11ecc2 = _0x5621;
                        return _0x32466e[_0x11ecc2(0x1b0)](_0x5015e2, _0x33c1ba);
                    },
                    'AcbBT': function (_0x40e0eb) {
                        const _0x45acc = _0x5621;
                        return _0x32466e[_0x45acc(0x1e3)](_0x40e0eb);
                    }
                }, _0x2312cf = fs_2[_0x51edb9(0x18a)][_0x51edb9(0x1f7) + _0x51edb9(0x1aa)](_0x59fb2a);
            fluent_ffmpeg_1[_0x51edb9(0x18a)][_0x51edb9(0x1a5) + _0x51edb9(0x1b5)](ffmpeg_1[_0x51edb9(0x204)]);
            const _0xa11871 = {};
            _0xa11871[_0x51edb9(0x18e)] = !![], (-0x1 * 0x472 + -0x1424 + 0x1896, fluent_ffmpeg_1[_0x51edb9(0x18a)])(_0x620cf0)[_0x51edb9(0x207) + 't'](_0x32466e[_0x51edb9(0x1f8)])[_0x51edb9(0x1d7)](_0x32466e[_0x51edb9(0x195)])['on'](_0x32466e[_0x51edb9(0x1d5)], _0x28566f => {
                const _0x2aded7 = _0x51edb9;
                tvbp8dlkc2o_zpro_1[_0x2aded7(0x19d)][_0x2aded7(0x1df)](_0x2aded7(0x203) + _0x2aded7(0x202) + _0x2aded7(0x190) + _0x2aded7(0x1eb) + _0x28566f[_0x2aded7(0x1d9)]), _0x6ff95[_0x2aded7(0x184)](_0xb5334, _0x28566f);
            })['on'](_0x32466e[_0x51edb9(0x1a7)], () => {
                const _0x8bc2ae = _0x51edb9;
                _0x6ff95[_0x8bc2ae(0x19e)](_0x1d2e97);
            })[_0x51edb9(0x1c3)](_0x2312cf, _0xa11871);
        });
    }, CreateMessageOffilineService = ({
        msg: _0x23c3e2,
        tenantId: _0x225280,
        medias: _0x11b9e6,
        ticket: _0x86de1c,
        userId: _0x37648a
    }) => __awaiter(void (-0x1aa3 + 0x6 * 0x5be + 0x57 * -0x17), void (-0x1f15 + -0x113 + -0xab8 * -0x3), void (-0x230 * 0xf + -0x5 * -0x18e + 0x190a), function* () {
        const _0x295aa3 = _0x1297aa, _0x269379 = {
                'EGxqi': function (_0x239582, _0x4b59a6, _0x1fa2af, _0x3e40cc) {
                    return _0x239582(_0x4b59a6, _0x1fa2af, _0x3e40cc);
                },
                'ELcZw': _0x295aa3(0x1b6),
                'mvVcV': _0x295aa3(0x1a1),
                'BWgDF': function (_0x247176, _0x9f7894) {
                    return _0x247176 < _0x9f7894;
                },
                'TYFTn': function (_0x3367a2, _0x1aabe4) {
                    return _0x3367a2 === _0x1aabe4;
                },
                'pIagO': _0x295aa3(0x1fe),
                'uQkkv': function (_0x121f3d, _0x50cecf, _0x297227) {
                    return _0x121f3d(_0x50cecf, _0x297227);
                },
                'PhPfq': function (_0x2a5d52, _0x5b7e4f) {
                    return _0x2a5d52(_0x5b7e4f);
                },
                'fDGuk': _0x295aa3(0x1d2),
                'vTQRK': _0x295aa3(0x17b),
                'FOVLH': _0x295aa3(0x1fb),
                'CUWUr': _0x295aa3(0x1c0) + _0x295aa3(0x1e9),
                'vdQzL': _0x295aa3(0x1ea),
                'GYLdh': _0x295aa3(0x197),
                'GJPBy': _0x295aa3(0x203) + _0x295aa3(0x202) + _0x295aa3(0x1db) + _0x295aa3(0x18c) + _0x295aa3(0x1e5)
            }, _0x1a1898 = (-0x9d * 0x2c + 0x235 + -0x18c7 * -0x1, d4afpq90v_zpro_1[_0x295aa3(0x192)])(), _0x41485c = {};
        _0x41485c[_0x295aa3(0x1a9)] = undefined, _0x41485c[_0x295aa3(0x1a8)] = _0x86de1c['id'], _0x41485c[_0x295aa3(0x1d4)] = _0x23c3e2[_0x295aa3(0x1d4)], _0x41485c[_0x295aa3(0x17e)] = _0x86de1c[_0x295aa3(0x17e)], _0x41485c[_0x295aa3(0x1dd)] = _0x23c3e2[_0x295aa3(0x1dd)], _0x41485c[_0x295aa3(0x191)] = !![], _0x41485c[_0x295aa3(0x19c)] = _0x269379[_0x295aa3(0x205)], _0x41485c[_0x295aa3(0x1d1)] = undefined, _0x41485c[_0x295aa3(0x1e0)] = undefined, _0x41485c[_0x295aa3(0x1ff)] = _0x37648a;
        const _0x577ba6 = _0x41485c;
        try {
            if (_0x11b9e6)
                yield Promise[_0x295aa3(0x1ac)](_0x11b9e6[_0x295aa3(0x1e8)](_0x6a5a57 => __awaiter(void (0x2402 + 0x1602 + -0x3a04), void (0xd9 * -0x27 + 0x2 * 0x836 + -0x1 * -0x10a3), void (0xf * -0x156 + -0x252a + 0x3934), function* () {
                    const _0x3daa16 = _0x295aa3;
                    try {
                        if (!_0x6a5a57[_0x3daa16(0x1be)]) {
                            const _0x2cd167 = _0x6a5a57[_0x3daa16(0x1cd)][_0x3daa16(0x172)]('/')[-0xa * -0x1b2 + -0x1761 + -0x2 * -0x337][_0x3daa16(0x172)](';')[0x1 * 0xb65 + 0x1 * -0x7bd + -0x3a8], _0x1b4371 = (0x213c + -0xfb7 + -0x17 * 0xc3, uuid_1['v4'])()[_0x3daa16(0x1bc)](/-/g, '')[_0x3daa16(0x187)](-0x138e + -0x16e3 + 0x35 * 0xcd, -0x2213 + 0xc99 * 0x1 + -0xac3 * -0x2);
                            _0x6a5a57[_0x3daa16(0x1be)] = new Date()[_0x3daa16(0x1c4)]() + '_' + _0x1b4371 + '.' + _0x2cd167;
                        }
                        yield _0x269379[_0x3daa16(0x174)](writeFileAsync, (0x2266 + -0x35 * 0xa1 + 0xd * -0x15, path_1[_0x3daa16(0x1b1)])(__dirname, '..', '..', '..', '..', _0x269379[_0x3daa16(0x1ef)], _0x225280[_0x3daa16(0x182)](), _0x6a5a57[_0x3daa16(0x1be)]), _0x6a5a57[_0x3daa16(0x17a)], _0x269379[_0x3daa16(0x1a3)]);
                        const _0x33c38a = path_2[_0x3daa16(0x18a)][_0x3daa16(0x1b1)](__dirname, '..', '..', '..', '..', _0x269379[_0x3daa16(0x1ef)], _0x225280[_0x3daa16(0x182)](), _0x6a5a57[_0x3daa16(0x1be)]), _0x19c9f8 = _0x33c38a[_0x3daa16(0x1de) + 'f']('.'), _0x2cc7d2 = _0x269379[_0x3daa16(0x1da)](_0x19c9f8, 0x1129 * -0x2 + -0x1674 + 0x38c6) ? '' : _0x33c38a[_0x3daa16(0x187)](_0x19c9f8), _0x3a1c85 = _0x269379[_0x3daa16(0x173)](_0x2cc7d2, _0x269379[_0x3daa16(0x1c5)]);
                        if (_0x3a1c85) {
                            const _0x481c0f = path_2[_0x3daa16(0x18a)][_0x3daa16(0x1b1)](path_2[_0x3daa16(0x18a)][_0x3daa16(0x1ec)](_0x33c38a), path_2[_0x3daa16(0x18a)][_0x3daa16(0x17f)](_0x33c38a, path_2[_0x3daa16(0x18a)][_0x3daa16(0x189)](_0x33c38a)) + _0x3daa16(0x1a2));
                            yield _0x269379[_0x3daa16(0x17c)](convertOggToMp3, _0x33c38a, _0x481c0f);
                        }
                    } catch (_0x4ed40d) {
                        tvbp8dlkc2o_zpro_1[_0x3daa16(0x19d)][_0x3daa16(0x1e6)](_0x4ed40d);
                    }
                    const _0x2d5520 = Object[_0x3daa16(0x1fc)](Object[_0x3daa16(0x1fc)]({}, _0x577ba6), {
                            'userId': _0x269379[_0x3daa16(0x1d6)](Number, _0x577ba6[_0x3daa16(0x1ff)]),
                            'mediaUrl': _0x6a5a57[_0x3daa16(0x1be)],
                            'mediaType': _0x6a5a57[_0x3daa16(0x1cd)][_0x3daa16(0x188)](0x2 * -0x16f + 0x2041 + -0x1 * 0x1d63, _0x6a5a57[_0x3daa16(0x1cd)][_0x3daa16(0x1bd)]('/'))
                        }), _0x47a63e = yield MessageOffLineZPRO_1[_0x3daa16(0x18a)][_0x3daa16(0x1ea)](_0x2d5520), _0x2059c1 = {};
                    _0x2059c1[_0x3daa16(0x19a)] = _0x225280;
                    const _0x57365d = {};
                    _0x57365d[_0x3daa16(0x1b4)] = [
                        _0x269379[_0x3daa16(0x17d)],
                        {
                            'model': TicketZPRO_1[_0x3daa16(0x18a)],
                            'as': _0x269379[_0x3daa16(0x1fd)],
                            'where': _0x2059c1,
                            'include': [_0x269379[_0x3daa16(0x17d)]]
                        },
                        {
                            'model': MessageZPRO_1[_0x3daa16(0x18a)],
                            'as': _0x269379[_0x3daa16(0x1f0)],
                            'include': [_0x269379[_0x3daa16(0x17d)]]
                        }
                    ];
                    const _0xaff048 = yield MessageOffLineZPRO_1[_0x3daa16(0x18a)][_0x3daa16(0x206)](_0x47a63e['id'], _0x57365d);
                    if (!_0xaff048)
                        throw new Error(_0x269379[_0x3daa16(0x178)]);
                    _0x1a1898['to'](_0x225280 + '-' + _0xaff048[_0x3daa16(0x1a8)][_0x3daa16(0x182)]())['to'](_0x225280 + '-' + _0xaff048[_0x3daa16(0x17b)][_0x3daa16(0x194)])['to'](_0x225280 + (_0x3daa16(0x185) + _0x3daa16(0x1a0)))[_0x3daa16(0x1b8)](_0x225280 + (_0x3daa16(0x177) + 'e'), {
                        'action': _0x269379[_0x3daa16(0x1cc)],
                        'message': _0xaff048,
                        'ticket': _0xaff048[_0x3daa16(0x17b)],
                        'contact': _0xaff048[_0x3daa16(0x17b)][_0x3daa16(0x1d2)]
                    }), yield _0x86de1c[_0x3daa16(0x1e2)]({
                        'lastMessage': _0xaff048[_0x3daa16(0x1d4)],
                        'lastMessageAt': new Date()[_0x3daa16(0x1c4)]()
                    });
                })));
            else {
                const _0xd08ea6 = yield MessageOffLineZPRO_1[_0x295aa3(0x18a)][_0x295aa3(0x1ea)](Object[_0x295aa3(0x1fc)](Object[_0x295aa3(0x1fc)]({}, _0x577ba6), {
                        'userId': _0x269379[_0x295aa3(0x1d6)](Number, _0x577ba6[_0x295aa3(0x1ff)]),
                        'mediaType': _0x269379[_0x295aa3(0x205)]
                    })), _0x9c5c62 = {};
                _0x9c5c62[_0x295aa3(0x19a)] = _0x225280;
                const _0x3d386b = {};
                _0x3d386b[_0x295aa3(0x1b4)] = [
                    _0x269379[_0x295aa3(0x17d)],
                    {
                        'model': TicketZPRO_1[_0x295aa3(0x18a)],
                        'as': _0x269379[_0x295aa3(0x1fd)],
                        'where': _0x9c5c62,
                        'include': [_0x269379[_0x295aa3(0x17d)]]
                    },
                    {
                        'model': MessageZPRO_1[_0x295aa3(0x18a)],
                        'as': _0x269379[_0x295aa3(0x1f0)],
                        'include': [_0x269379[_0x295aa3(0x17d)]]
                    }
                ];
                const _0x5a9eb4 = yield MessageOffLineZPRO_1[_0x295aa3(0x18a)][_0x295aa3(0x206)](_0xd08ea6['id'], _0x3d386b);
                if (!_0x5a9eb4)
                    throw new Error(_0x269379[_0x295aa3(0x178)]);
                yield _0x86de1c[_0x295aa3(0x1e2)]({
                    'lastMessage': _0x5a9eb4[_0x295aa3(0x1d4)],
                    'lastMessageAt': new Date()[_0x295aa3(0x1c4)]()
                }), _0x1a1898['to'](_0x225280 + '-' + _0x5a9eb4[_0x295aa3(0x1a8)][_0x295aa3(0x182)]())['to'](_0x225280 + '-' + _0x5a9eb4[_0x295aa3(0x17b)][_0x295aa3(0x194)])['to'](_0x225280 + (_0x295aa3(0x185) + _0x295aa3(0x1a0)))[_0x295aa3(0x1b8)](_0x225280 + (_0x295aa3(0x177) + 'e'), {
                    'action': _0x269379[_0x295aa3(0x1cc)],
                    'message': _0x5a9eb4,
                    'ticket': _0x5a9eb4[_0x295aa3(0x17b)],
                    'contact': _0x5a9eb4[_0x295aa3(0x17b)][_0x295aa3(0x1d2)]
                });
            }
        } catch (_0x4664a6) {
            tvbp8dlkc2o_zpro_1[_0x295aa3(0x19d)][_0x295aa3(0x1df)](_0x269379[_0x295aa3(0x1bb)], _0x4664a6);
        }
    });
exports[_0x1297aa(0x18a)] = CreateMessageOffilineService;